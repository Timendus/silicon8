(()=>{var e={364:e=>{e.exports='\0Ã abc\0Â¢,Ã³Ã°e@\0*@Ã¿""{Ã°eÃ‘%Âs\bars\b*   WelcomeÃ¿       to Silicon-8!Ã¿Click the screenÃ¿or drag a *.ch8Ã¿file here ^_^\0dÂ€Bd Â€EÂ¢ÂÂ€Ã°Ã°Ã°\0Ã®\0\0\0\0\0Â€Â€Â€\0Â€Â Â \0\0\0PÃ¸PÃ¸PxÂ p(Ã°Â  @Â€Â @Â @Â pÂ€Â€\0\0\0@Â€Â€Â€@Â€@@@Â€ Â¨pÂ¨ \0@Ã @\0\0\0\0@Â€\0\0Ã \0\0\0\0\0\0Â€  @Â€Â€`ÂÂÂ`@Ã€@@Ã Ã `Â€Ã°Ã `Ã Â€ÂÃ°Ã°Â€Ã Ã `Â€Ã Â`Ã° @@`Â`Â``Âp`\0Â€\0Â€\0\0@\0@Â€ @Â€@ \0Ã \0Ã \0Â€@ @Â€Ã€ @\0@`ÂÂ°Â€``ÂÃ°ÂÂÃ ÂÃ ÂÃ pÂ€Â€Â€pÃ ÂÂÂÃ Ã Â€Ã Â€Ã Ã Â€Ã€Â€Â€pÂ€Â°Â`ÂÂÃ°ÂÂÃ @@@Ã Ã    Ã€ÂÂ Ã€Â ÂÂ€Â€Â€Â€Ã ÂˆÃ˜Â¨ÂˆÂˆÂÃÃ°Â°Â`ÂÂÂ`Ã ÂÃ Â€Â€`ÂÂÂ°pÃ ÂÃ ÂÂpÂ€`Ã Ã¸    ÂÂÂÂ`ÂÂÂ``ÂˆÂˆÂ¨Ã˜ÂˆÂˆP PÂˆÂˆP   Ã  @Â€Ã Ã€Â€Â€Â€Ã€Â€Â€@  Ã€@@@Ã€@Â \0\0\0\0\0\0\0Ã Â€@\0\0\0\0`Â Â `Â€Â€Ã€Â Ã€\0`Â€Â€`  `Â `\0@Â Ã€`@Â€Ã€Â€Â€\0`Â `Ã€Â€Â€Ã€Â Â Â€\0Â€Â€Â€@\0@@Â€Â€Â€Â Ã€Â Ã€@@@@\0Â Ã Â Â \0Ã€Â Â Â \0@Â Â @\0Ã€Â Ã€Â€\0`Â ` \0Â Ã€Â€Â€\0@Â€@Â€Â€Â€Ã€Â€@\0Â Â Â @\0Â Â @@\0Â Â Ã Â \0Â @@Â \0Â Â @Â€\0Ã€@Â€Ã€`@Â€@`Â€Â€Â€Â€Â€Ã€@ @Ã€\0PÂ \0\0'},447:e=>{e.exports={AUTO:0,STRICTVIP:1,VIP:2,BLINDVIP:3,SCHIP:4,XOCHIP:5}},497:e=>{const t=document.getElementById("display"),s=t.getContext("2d");e.exports={render:(e,n,a)=>{t.width=e,t.height=n;const r=s.createImageData(e,n);for(let t=0;t<n*e;t++){const e=4*t,s=3*t;r.data[e+0]=a[s+0],r.data[e+1]=a[s+1],r.data[e+2]=a[s+2],r.data[e+3]=255}s.putImageData(r,0,0)}}},755:e=>{const t=new Go;WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=async(e,t)=>{const s=await(await e).arrayBuffer();return await WebAssembly.instantiate(s,t)}),e.exports=class{constructor({playSound:e,stopSound:s,display:n}){e||=()=>{},s||=()=>{},Object.assign(t.importObject.env,{"main.randomByte":()=>255&Math.floor(256*Math.random()),"main.playSound":(t,s,n)=>{s=new Uint8Array(this._cpu.memory.buffer,s,16),e(t,s,n)},"main.stopSound":s,"main.render":(e,t,s)=>{const a=new Uint8Array(this._cpu.memory.buffer,s,e*t*3);n.render(e,t,a)}})}init(){return WebAssembly.instantiateStreaming(fetch("silicon8.wasm"),t.importObject).then((e=>{this._cpu=e.instance.exports,t.run(e.instance),setInterval((()=>this._cpu.clockTick()),1e3/60)})).catch((e=>{console.error(e)}))}setCyclesPerFrame(e){this._cpu.setCyclesPerFrame(e)}loadProgram(e,t){this._cpu.reset(e);const s=new Uint8Array(this._cpu.memory.buffer,this._cpu.ramPtr(),this._cpu.ramSize());for(let e=512;e<512+t.length;e++)s[e]=t[e-512]}dumpStatus(){this._cpu.dumpStatus()}pressKey(e){this._cpu.pressKey(e)}releaseKey(e){this._cpu.releaseKey(e)}}},996:(e,t,s)=>{const n=s(82);e.exports=e=>{const t={};let s=[],a=!1;const r={12:5,14:7,15:9,13:8,0:6,1:4};function o(){if(!a)return;const n=navigator.getGamepads();if(n){for(const a of n)if(a)if(t[a.index]){for(const s in r)a.buttons[s].pressed!=t[a.index][s]&&(a.buttons[s].pressed?e.pressKey(r[s]):e.releaseKey(r[s]));i(a)}else s.includes(a.index)||(console.warn("Got an unannounced gamepad:",a),s.push(a.index));requestAnimationFrame(o)}}function i(e){t[e.index]=Object.keys(r).map((t=>[t,e.buttons[t].pressed])).reduce(((e,t)=>(e[t[0]]=t[1],e)),{})}window.addEventListener("gamepadconnected",(e=>{if("standard"!=e.gamepad.mapping)return s.push(e.gamepad.index),console.log(`ðŸŽ® Ignoring gamepad ${e.gamepad.id} because it is not a 'standard mapping' gamepad`);n(`ðŸŽ® Connected to gamepad "${e.gamepad.id}"`),i(e.gamepad),a||(a=!0,requestAnimationFrame(o))})),window.addEventListener("gamepaddisconnected",(e=>{s.includes(e.gamepad.index)&&(s=s.filter((t=>t!=e.gamepad.index))),t[e.gamepad.index]&&(n(`ðŸŽ® Gamepad "${e.gamepad.id}" disconnected`),delete t[e.gamepad.index],0==Object.keys(t).length&&(a=!1))}))}},432:e=>{let t=30;e.exports=e=>{const s={38:5,37:7,39:9,40:8,49:1,50:2,51:3,52:12,81:4,87:5,69:6,82:13,65:7,83:8,68:9,70:14,90:10,88:0,67:11,86:15,48:0,53:5,54:6,55:7,56:8,57:9};window.addEventListener("keydown",(n=>{if(e)switch(n.keyCode){case 13:return e.dumpStatus();case 187:return t*=2,e.setCyclesPerFrame(t);case 189:return t/=2,e.setCyclesPerFrame(t);default:s[n.keyCode]&&e.pressKey(s[n.keyCode])}})),window.addEventListener("keyup",(t=>{e&&s[t.keyCode]&&e.releaseKey(s[t.keyCode])})),document.querySelectorAll(".keyboard button").forEach((t=>{t.addEventListener("touchstart",(()=>{e.pressKey(t.dataset.value)}),{passive:!0}),t.addEventListener("touchend",(()=>{e.releaseKey(t.dataset.value)}),{passive:!0})}))}},82:e=>{e.exports=e=>{const t=document.querySelector(".notification");t.innerText=e,t.classList.add("active"),setTimeout((()=>t.classList.remove("active")),5e3)}},281:e=>{let t,s;function n(e){t||function(){const e=new(window.AudioContext||window.webkitAudioContext||window.audioContext);s=e.createOscillator(),t=e.createGain(),t.gain.value=0,s.frequency.value=600,s.type="triangle",s.connect(t),t.connect(e.destination),s.start()}(),t.gain.value=e}e.exports={playSound:(e,t,s)=>{e||n(.1)},stopSound:()=>{n(0)}}}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";class e{constructor(){this._handlers={},document.addEventListener("click",(e=>this._callHandler("click",e))),document.addEventListener("mousedown",(e=>this._callHandler("mousedown",e))),document.addEventListener("mouseup",(e=>this._callHandler("mouseup",e)))}register(e,t={click:null,mousedown:null,mouseup:null}){"function"==typeof t&&(t={click:t}),this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)}_callHandler(e,t){Object.keys(this._handlers).forEach((s=>{null!==t.target.closest(s)&&this._handlers[s].map((t=>t[e])).forEach((e=>{"function"!=typeof e||t.defaultPrevented||e(t,s)}))}))}}e.instance=function(){return e._instance?e._instance:e._instance=new e};const t=e;class n{constructor(e="dragging"){this._dragClass=e,this._handlers={},document.addEventListener("dragover",(e=>this._dragOver(e))),document.addEventListener("dragleave",(e=>this._dragLeave(e))),document.addEventListener("drop",(e=>this._drop(e)))}register(e,s){this._handlers[e]=s,t.instance().register(e,((e,t)=>this._openFileDialog(e,t)))}_dragOver(e){this._isDropTarget(e.target)&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",e.target.classList.add(this._dragClass))}_dragLeave(e){this._isDropTarget(e.target)&&(e.stopPropagation(),e.preventDefault(),e.target.classList.remove(this._dragClass))}_drop(e){let t=this._isDropTarget(e.target);t&&(e.stopPropagation(),e.preventDefault(),e.target.classList.remove(this._dragClass),this._handleFile(t,e,e.dataTransfer.files[0]))}_isDropTarget(e){return Object.keys(this._handlers).find((t=>{if(e.closest(t))return t}))||!1}_openFileDialog(e,t){const s=document.createElement("input");s.type="file",s.addEventListener("change",(s=>this._handleFile(t,e,s.target.files[0]))),s.click()}_handleFile(e,t,s){this._readFile(s).then((n=>this._handlers[e](s,n,t)))}_readFile(e){return new Promise(((t,s)=>{var n=new FileReader;n.addEventListener("load",(e=>t(e.target.result))),n.readAsDataURL(e)}))}}n.instance=function(){return n._instance?n._instance:n._instance=new n};const a=n;class r{constructor(e=!1,t=null){this._routes=[],e&&this.addRoutes(e,t)}install(){return t.instance().register("a[href]",(e=>this._handleClick(e))),window.addEventListener("hashchange",(e=>this._handleNavigationEvent(e))),window.addEventListener("load",(e=>this._handleNavigationEvent(e))),this}addRoute(e,t){return this._routes.push([e,t]),this}addRoutes(e,t=null){return Array.isArray(e)?e.forEach((e=>this.addRoute(e,t))):Object.keys(e).forEach((t=>this.addRoute(t,e[t]))),this}route(e,t){const s=this._matchingRoute(e);return s&&s.router?s.router.route(s.subpath,t):s&&s.handler?s.handler(s.route,s.matches,t):void 0}_handleClick(e){let t=e.target.getAttribute("href");t.startsWith("#")&&(t=t.substr(1),this._matchingRoute(t)&&(window.location.hash=t,e.preventDefault()))}_handleNavigationEvent(e){let t=window.location.hash;t.startsWith("#")&&(t=t.substr(1)),this.route(t,e)}_matchingRoute(e){return e&&(this._subRouterMatch(e)||this._stringMatch(e)||this._regExpMatch(e))}_subRouterMatch(e){const t=this._routes.filter((e=>e[1]instanceof r)).find((t=>e.startsWith(t[0]+"/")||e==t[0]));return t&&{router:t[1],subpath:e.substr(t[0].length+1)}}_stringMatch(e){const t=this._routes.find((t=>e==t[0]));return t&&{route:t[0],handler:t[1]}}_regExpMatch(e){const t=this._routes.filter((e=>e[0]instanceof RegExp)).find((t=>e.match(t[0])));return t&&{route:t[0],handler:t[1],matches:e.match(t[0])}}}const o={Click:t,FileTarget:a,Router:r,Energize:class{constructor(e,s={}){this._scope=e,this._options=this._normalizeOptions(s),t.instance().register(`${e} [${this._options.open}], ${e} [${this._options.close}], ${e} [${this._options.toggle}]`,(e=>this._handleClick(e)))}_normalizeOptions(e){return Object.assign({class:"active",open:"data-open",close:"data-close",toggle:"data-toggle",group:"data-group",timer:"data-timer",follower:"data-follower"},e)}_handleClick(e){const t=e.target.closest(`[${this._options.open}], [${this._options.close}], [${this._options.toggle}]`),s=t.getAttribute(this._options.close),n=t.getAttribute(this._options.open),a=t.getAttribute(this._options.toggle);let r=s?document.querySelectorAll(`${this._scope} ${s}`):[],o=n?document.querySelectorAll(`${this._scope} ${n}`):[];r=[...r,...a?document.querySelectorAll(`${this._scope} ${a}.${this._options.class}`):[]],o=[...o,...a?document.querySelectorAll(`${this._scope} ${a}:not(.${this._options.class})`):[]],this._close(r),this._open(o),e.preventDefault(),e.stopPropagation()}_close(e){e.forEach((e=>{e.classList.remove(this._options.class),this._close(this._followers(e))}))}_open(e){e.forEach((e=>{this._close(this._group(e)),e.classList.add(this._options.class),this._open(this._followers(e));const t=e.getAttribute(this._options.timer);t&&window.setTimeout((()=>this._close([e])),t)}))}_group(e){const t=e.getAttribute(this._options.group);return t?[...document.querySelectorAll(`${this._scope} [${this._options.group}=${t}]`)]:[]}_followers(e){const t=e.getAttribute(this._options.follower);return t?[...document.querySelectorAll(`${this._scope} ${t}`)]:[]}}},i=o;window.Thimbleful=o;var c=s(364),d=s.n(c);const l=s(447),u=new Uint8Array(d().length);for(let e=0;e<d().length;e++)u[e]=d().charCodeAt(e);window.addEventListener("load",(async()=>{const e=s(755),t=s(432),n=s(996),a=s(497),{playSound:r,stopSound:o}=s(281),c=new e({display:a,playSound:r,stopSound:o});await c.init(),t(c),n(c),c.loadProgram(l.AUTO,u),i.FileTarget.instance().register("#display",((e,t)=>{if(".ch8"!=e.name.substr(-4))return alert("You can only load *.ch8 CHIP-8 ROMs");t=atob(t.split(",")[1]);const s=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);c.loadProgram(l.AUTO,s)}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEQsR0FBS0csRUFBS2tQLFdBQVdyUCxHQUMvQnNDLEVBQVNVLFlBQVk0TCxFQUFNN1AsS0FBTW1FLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvd2VsY29tZS5jaDgiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9zaGFyZWQvdHlwZXMuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi93ZWItY2xpZW50L2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi93ZWItY2xpZW50L2VtdWxhdG9yLmpzIiwid2VicGFjazovL3NpbGljb244Ly4vd2ViLWNsaWVudC9nYW1lcGFkLmpzIiwid2VicGFjazovL3NpbGljb244Ly4vd2ViLWNsaWVudC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvbm90aWZpY2F0aW9uLmpzIiwid2VicGFjazovL3NpbGljb244Ly4vd2ViLWNsaWVudC9zb3VuZC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zaWxpY29uOC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zaWxpY29uOC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL25vZGVfbW9kdWxlcy90aGltYmxlZnVsL3NyYy9jbGljay5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL25vZGVfbW9kdWxlcy90aGltYmxlZnVsL3NyYy9maWxldGFyZ2V0LmpzIiwid2VicGFjazovL3NpbGljb244Ly4vbm9kZV9tb2R1bGVzL3RoaW1ibGVmdWwvc3JjL3JvdXRlci5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL25vZGVfbW9kdWxlcy90aGltYmxlZnVsL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL25vZGVfbW9kdWxlcy90aGltYmxlZnVsL3NyYy9lbmVyZ2l6ZS5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIlxcdTAwMDDDoGFcXHUwMDAxYlxcdTAwMDFjXFx1MDAwMMKiLMOzXFx1MDAxZcOwZUBcXHUwMDAwXFx1MDAxMipAw79cXHUwMDEyXFxcIlxcXCJ7w7Blw5ElwoFcXHUwMDA0c1xcdTAwMDFcXHUwMDEyXFxiYVxcdTAwMDFyXFx1MDAwNnNcXHUwMDAxXFx1MDAxMlxcYlxcdTAwMTIqICAgV2VsY29tZcO/ICAgICAgIHRvIFNpbGljb24tOCHDv0NsaWNrIHRoZSBzY3JlZW7Dv29yIGRyYWcgYSAqLmNoOMO/ZmlsZSBoZXJlIF5fXlxcdTAwMDBkf8KAQmQgwoBFwqLCj8KAXFx1MDAwZcOwXFx1MDAxZcOwXFx1MDAxZcOwXFx1MDAxZVxcdTAwMDDDrlxcdTAwMDJcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDLCgMKAwoBcXHUwMDAwwoBcXHUwMDA0wqDCoFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDZQw7hQw7hQXFx1MDAwNnjCoHAow7BcXHUwMDA0wqAgQMKAwqBcXHUwMDA1QMKgQMKgcFxcdTAwMDLCgMKAXFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwM0DCgMKAwoBAXFx1MDAwM8KAQEBAwoBcXHUwMDA2IMKocMKoIFxcdTAwMDRcXHUwMDAwQMOgQFxcdTAwMDBcXHUwMDAzXFx1MDAwMFxcdTAwMDBcXHUwMDAwQMKAXFx1MDAwNFxcdTAwMDBcXHUwMDAww6BcXHUwMDAwXFx1MDAwMFxcdTAwMDJcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDAwwoBcXHUwMDA0ICBAwoDCgFxcdTAwMDVgwpDCkMKQYFxcdTAwMDRAw4BAQMOgXFx1MDAwNcOgXFx1MDAxMGDCgMOwXFx1MDAwNcOgXFx1MDAxMGBcXHUwMDEww6BcXHUwMDA1woDCkMOwXFx1MDAxMFxcdTAwMTBcXHUwMDA1w7DCgMOgXFx1MDAxMMOgXFx1MDAwNWDCgMOgwpBgXFx1MDAwNcOwXFx1MDAxMCBAQFxcdTAwMDVgwpBgwpBgXFx1MDAwNWDCkHBcXHUwMDEwYFxcdTAwMDJcXHUwMDAwwoBcXHUwMDAwwoBcXHUwMDAwXFx1MDAwM1xcdTAwMDBAXFx1MDAwMEDCgFxcdTAwMDQgQMKAQCBcXHUwMDA0XFx1MDAwMMOgXFx1MDAwMMOgXFx1MDAwMFxcdTAwMDTCgEAgQMKAXFx1MDAwNMOAIEBcXHUwMDAwQFxcdTAwMDVgwpDCsMKAYFxcdTAwMDVgwpDDsMKQwpBcXHUwMDA1w6DCkMOgwpDDoFxcdTAwMDVwwoDCgMKAcFxcdTAwMDXDoMKQwpDCkMOgXFx1MDAwNMOgwoDDoMKAw6BcXHUwMDA0w6DCgMOAwoDCgFxcdTAwMDVwwoDCsMKQYFxcdTAwMDXCkMKQw7DCkMKQXFx1MDAwNMOgQEBAw6BcXHUwMDA0w6AgICDDgFxcdTAwMDXCkMKgw4DCoMKQXFx1MDAwNMKAwoDCgMKAw6BcXHUwMDA2wojDmMKowojCiFxcdTAwMDXCkMOQw7DCsMKQXFx1MDAwNWDCkMKQwpBgXFx1MDAwNcOgwpDDoMKAwoBcXHUwMDA1YMKQwpDCsHBcXHUwMDA1w6DCkMOgwpDCkFxcdTAwMDVwwoBgXFx1MDAxMMOgXFx1MDAwNsO4ICAgIFxcdTAwMDXCkMKQwpDCkGBcXHUwMDA1wpDCkMKQYGBcXHUwMDA2wojCiMKow5jCiFxcdTAwMDbCiFAgUMKIXFx1MDAwNsKIUCAgIFxcdTAwMDTDoCBAwoDDoFxcdTAwMDPDgMKAwoDCgMOAXFx1MDAwNMKAwoBAICBcXHUwMDAzw4BAQEDDgFxcdTAwMDRAwqBcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDA0XFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwMMOgXFx1MDAwM8KAQFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDRcXHUwMDAwYMKgwqBgXFx1MDAwNMKAwoDDgMKgw4BcXHUwMDA0XFx1MDAwMGDCgMKAYFxcdTAwMDQgIGDCoGBcXHUwMDA0XFx1MDAwMEDCoMOAYFxcdTAwMDNAwoDDgMKAwoBcXHUwMDA0XFx1MDAwMGDCoGDDgFxcdTAwMDTCgMKAw4DCoMKgXFx1MDAwMsKAXFx1MDAwMMKAwoDCgFxcdTAwMDNAXFx1MDAwMEBAwoBcXHUwMDA0woDCgMKgw4DCoFxcdTAwMDPDgEBAQEBcXHUwMDA0XFx1MDAwMMKgw6DCoMKgXFx1MDAwNFxcdTAwMDDDgMKgwqDCoFxcdTAwMDRcXHUwMDAwQMKgwqBAXFx1MDAwNFxcdTAwMDDDgMKgw4DCgFxcdTAwMDRcXHUwMDAwYMKgYCBcXHUwMDA0XFx1MDAwMMKgw4DCgMKAXFx1MDAwM1xcdTAwMDBAwoBAwoBcXHUwMDAzwoDCgMOAwoBAXFx1MDAwNFxcdTAwMDDCoMKgwqBAXFx1MDAwNFxcdTAwMDDCoMKgQEBcXHUwMDA0XFx1MDAwMMKgwqDDoMKgXFx1MDAwNFxcdTAwMDDCoEBAwqBcXHUwMDA0XFx1MDAwMMKgwqBAwoBcXHUwMDAzXFx1MDAwMMOAQMKAw4BcXHUwMDA0YEDCgEBgXFx1MDAwMsKAwoDCgMKAwoBcXHUwMDA0w4BAIEDDgFxcdTAwMDVcXHUwMDAwUMKgXFx1MDAwMFxcdTAwMDBcIiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBBVVRPOiAgICAgIDAsXG4gIFNUUklDVFZJUDogMSwgIC8vIE5vdGUgdGhhdCB0aGVzZSB0d28gaGFsdCBmb3IgZGlzcGxheSByZWZyZXNoLCB1c2UgQkxJTkRWSVBcbiAgVklQOiAgICAgICAyLCAgLy8gaW5zdGVhZCBmb3IgaGVhZGxlc3MgdGVzdGluZ1xuICBCTElORFZJUDogIDMsXG4gIFNDSElQOiAgICAgNCxcbiAgWE9DSElQOiAgICA1XG59O1xuIiwiY29uc3QgY2FudmFzICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5Jyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXI6ICh3aWR0aCwgaGVpZ2h0LCBieXRlcykgPT4ge1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgY29uc3QgaW1hZ2VEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgaGVpZ2h0ICogd2lkdGg7IGkrKyApIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlPZmZzZXQgID0gaSAqIDQ7XG4gICAgICBjb25zdCBzaWxpY29uOE9mZnNldCA9IGkgKiAzO1xuICAgICAgaW1hZ2VEYXRhLmRhdGFbZGlzcGxheU9mZnNldCswXSA9IGJ5dGVzW3NpbGljb244T2Zmc2V0KzBdO1xuICAgICAgaW1hZ2VEYXRhLmRhdGFbZGlzcGxheU9mZnNldCsxXSA9IGJ5dGVzW3NpbGljb244T2Zmc2V0KzFdO1xuICAgICAgaW1hZ2VEYXRhLmRhdGFbZGlzcGxheU9mZnNldCsyXSA9IGJ5dGVzW3NpbGljb244T2Zmc2V0KzJdO1xuICAgICAgaW1hZ2VEYXRhLmRhdGFbZGlzcGxheU9mZnNldCszXSA9IDB4RkY7XG4gICAgfVxuICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gIH1cbn07XG4iLCIvLyBUaGlzIGlzIGp1c3QgYSB3cmFwcGVyIGZvciBhbGwgdGhlIFdlYkFzc2VtYmx5IHN0dWZmLlxuXG4vLyByZXF1aXJlKCcuL3dhc21fZXhlYy5qcycpO1xuY29uc3QgZ28gPSBuZXcgR28oKTtcblxuaWYgKCFXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZykgeyAvLyBwb2x5ZmlsbFxuICBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyA9IGFzeW5jIChyZXNwLCBpbXBvcnRPYmplY3QpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCAoYXdhaXQgcmVzcCkuYXJyYXlCdWZmZXIoKTtcbiAgICByZXR1cm4gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoc291cmNlLCBpbXBvcnRPYmplY3QpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIHtcblxuICBjb25zdHJ1Y3Rvcih7cGxheVNvdW5kLCBzdG9wU291bmQsIGRpc3BsYXl9KSB7XG4gICAgcGxheVNvdW5kIHx8PSAoKSA9PiB7fTtcbiAgICBzdG9wU291bmQgfHw9ICgpID0+IHt9O1xuXG4gICAgT2JqZWN0LmFzc2lnbihnby5pbXBvcnRPYmplY3QuZW52LCB7XG4gICAgICAnbWFpbi5yYW5kb21CeXRlJzogKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KSAmIDB4RkYsXG4gICAgICAnbWFpbi5wbGF5U291bmQnOiAgKHBsYXlpbmdQYXR0ZXJuLCBwYXR0ZXJuLCBwaXRjaCkgPT4ge1xuICAgICAgICBwYXR0ZXJuID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fY3B1Lm1lbW9yeS5idWZmZXIsIHBhdHRlcm4sIDE2KTtcbiAgICAgICAgcGxheVNvdW5kKHBsYXlpbmdQYXR0ZXJuLCBwYXR0ZXJuLCBwaXRjaCk7XG4gICAgICB9LFxuICAgICAgJ21haW4uc3RvcFNvdW5kJzogIHN0b3BTb3VuZCxcbiAgICAgICdtYWluLnJlbmRlcic6ICh3aWR0aCwgaGVpZ2h0LCBkYXRhUHRyKSA9PiB7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fY3B1Lm1lbW9yeS5idWZmZXIsIGRhdGFQdHIsIHdpZHRoICogaGVpZ2h0ICogMyk7XG4gICAgICAgIGRpc3BsYXkucmVuZGVyKHdpZHRoLCBoZWlnaHQsIGJ5dGVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGZldGNoKFwic2lsaWNvbjgud2FzbVwiKSwgZ28uaW1wb3J0T2JqZWN0KVxuICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICB0aGlzLl9jcHUgPSByZXN1bHQuaW5zdGFuY2UuZXhwb3J0cztcbiAgICAgIGdvLnJ1bihyZXN1bHQuaW5zdGFuY2UpO1xuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5fY3B1LmNsb2NrVGljaygpLCAxMDAwIC8gNjApO1xuICAgIH0pXG4gICAgLmNhdGNoKGUgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEN5Y2xlc1BlckZyYW1lKG5ld0N5Y2xlcykge1xuICAgIHRoaXMuX2NwdS5zZXRDeWNsZXNQZXJGcmFtZShuZXdDeWNsZXMpO1xuICB9XG5cbiAgbG9hZFByb2dyYW0odHlwZSwgcHJvZ3JhbSkge1xuICAgIHRoaXMuX2NwdS5yZXNldCh0eXBlKTtcbiAgICBjb25zdCByYW0gPSBuZXcgVWludDhBcnJheSh0aGlzLl9jcHUubWVtb3J5LmJ1ZmZlciwgdGhpcy5fY3B1LnJhbVB0cigpLCB0aGlzLl9jcHUucmFtU2l6ZSgpKTtcbiAgICAvLyBMb2FkIHByb2dyYW0gaW50byBSQU1cbiAgICBmb3IgKCBsZXQgaSA9IDB4MjAwOyBpIDwgMHgyMDAgKyBwcm9ncmFtLmxlbmd0aDsgaSsrICkgcmFtW2ldID0gcHJvZ3JhbVtpIC0gMHgyMDBdO1xuICB9XG5cbiAgZHVtcFN0YXR1cygpIHtcbiAgICB0aGlzLl9jcHUuZHVtcFN0YXR1cygpO1xuICB9XG5cbiAgcHJlc3NLZXkoa2V5KSB7XG4gICAgdGhpcy5fY3B1LnByZXNzS2V5KGtleSk7XG4gIH1cblxuICByZWxlYXNlS2V5KGtleSkge1xuICAgIHRoaXMuX2NwdS5yZWxlYXNlS2V5KGtleSk7XG4gIH1cblxufVxuIiwiY29uc3Qgbm90aWZ5ID0gcmVxdWlyZSgnLi9ub3RpZmljYXRpb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnN0YW5jZSA9PiB7XG5cbiAgY29uc3QgZ2FtZXBhZHMgPSB7fTtcbiAgbGV0IHVuYW5ub3VuY2VkR2FtZXBhZHMgPSBbXTtcbiAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcblxuICAvLyBEZWZhdWx0IGJ1dHRvbnMgZm9yIGEgc3RhbmRhcmQgY29udHJvbGxlclxuICBjb25zdCBrZXlzID0ge1xuICAgIDEyOiA1LCAvLyBVcFxuICAgIDE0OiA3LCAvLyBMZWZ0XG4gICAgMTU6IDksIC8vIFJpZ2h0XG4gICAgMTM6IDgsIC8vIERvd25cblxuICAgIDA6IDYsICAvLyBBXG4gICAgMTogNCAgIC8vIEJcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZ2FtZXBhZGNvbm5lY3RlZCcsIGUgPT4ge1xuICAgIC8vIElnbm9yZSBjb250cm9sbGVycyB0aGF0IGFyZSBub3Qgc3RhbmRhcmQgY29udHJvbGxlcnNcbiAgICBpZiAoIGUuZ2FtZXBhZC5tYXBwaW5nICE9IFwic3RhbmRhcmRcIiApIHtcbiAgICAgIHVuYW5ub3VuY2VkR2FtZXBhZHMucHVzaChlLmdhbWVwYWQuaW5kZXgpO1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGDwn46uIElnbm9yaW5nIGdhbWVwYWQgJHtlLmdhbWVwYWQuaWR9IGJlY2F1c2UgaXQgaXMgbm90IGEgJ3N0YW5kYXJkIG1hcHBpbmcnIGdhbWVwYWRgKTtcbiAgICB9XG5cbiAgICBub3RpZnkoYPCfjq4gQ29ubmVjdGVkIHRvIGdhbWVwYWQgXCIke2UuZ2FtZXBhZC5pZH1cImApO1xuICAgIHNhdmVTdGF0ZShlLmdhbWVwYWQpO1xuICAgIGlmICggIXJ1bm5pbmcgKSB7XG4gICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwb2xsR2FtZXBhZHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dhbWVwYWRkaXNjb25uZWN0ZWQnLCBlID0+IHtcbiAgICAvLyBSZW1vdmUgdW5hbm5vdW5jZWQgZ2FtZXBhZHMgZnJvbSBvdXIgbGlzdCBpZiB0aGV5IGxlYXZlXG4gICAgaWYgKCB1bmFubm91bmNlZEdhbWVwYWRzLmluY2x1ZGVzKGUuZ2FtZXBhZC5pbmRleCkgKVxuICAgICAgdW5hbm5vdW5jZWRHYW1lcGFkcyA9IHVuYW5ub3VuY2VkR2FtZXBhZHMuZmlsdGVyKGcgPT4gZyAhPSBlLmdhbWVwYWQuaW5kZXgpO1xuICAgIC8vIElnbm9yZSBjb250cm9sbGVycyB0aGF0IGFyZSBub3QgaW4gb3VyIG1haW4gbGlzdFxuICAgIGlmICggIWdhbWVwYWRzW2UuZ2FtZXBhZC5pbmRleF0gKVxuICAgICAgcmV0dXJuO1xuXG4gICAgbm90aWZ5KGDwn46uIEdhbWVwYWQgXCIke2UuZ2FtZXBhZC5pZH1cIiBkaXNjb25uZWN0ZWRgKTtcbiAgICBkZWxldGUgZ2FtZXBhZHNbZS5nYW1lcGFkLmluZGV4XTtcbiAgICBpZiAoIE9iamVjdC5rZXlzKGdhbWVwYWRzKS5sZW5ndGggPT0gMCApIHJ1bm5pbmcgPSBmYWxzZTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcG9sbEdhbWVwYWRzKCkge1xuICAgIGlmICggIXJ1bm5pbmcgKSByZXR1cm47XG5cbiAgICBjb25zdCBjdXJyZW50R2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcbiAgICBpZiAoICFjdXJyZW50R2FtZXBhZHMgKSByZXR1cm47XG5cbiAgICBmb3IgKCBjb25zdCBnYW1lcGFkIG9mIGN1cnJlbnRHYW1lcGFkcyApIHtcbiAgICAgIC8vIERvbid0IHVzZSBub24tZXhpc3RhbnQgZ2FtZXBhZHMgKGxvb2tpbmcgYXQgeW91LCBDaHJvbWUpXG4gICAgICBpZiAoICFnYW1lcGFkICkgY29udGludWU7XG5cbiAgICAgIC8vIE9ubHkgdXNlIGdhbWVwYWRzIHRoYXQgd2UgZ290IGEgdmFsaWQgY29ubmVjdCBldmVudCBmb3JcbiAgICAgIGlmICggIWdhbWVwYWRzW2dhbWVwYWQuaW5kZXhdICkge1xuICAgICAgICBpZiAoICF1bmFubm91bmNlZEdhbWVwYWRzLmluY2x1ZGVzKGdhbWVwYWQuaW5kZXgpICkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkdvdCBhbiB1bmFubm91bmNlZCBnYW1lcGFkOlwiLCBnYW1lcGFkKTtcbiAgICAgICAgICB1bmFubm91bmNlZEdhbWVwYWRzLnB1c2goZ2FtZXBhZC5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGFueSBvZiB0aGUgKHVzZWZ1bCkgYnV0dG9ucyBjaGFuZ2Ugc3RhdGUgb24gYW55IG9mIHRoZSBnYW1lcGFkcyxcbiAgICAgIC8vIGxldCBTaWxpY29uOCBrbm93LlxuICAgICAgZm9yICggY29uc3Qga2V5IGluIGtleXMgKSB7XG4gICAgICAgIGlmICggZ2FtZXBhZC5idXR0b25zW2tleV0ucHJlc3NlZCAhPSBnYW1lcGFkc1tnYW1lcGFkLmluZGV4XVtrZXldICkge1xuICAgICAgICAgIGlmICggZ2FtZXBhZC5idXR0b25zW2tleV0ucHJlc3NlZCApXG4gICAgICAgICAgICBpbnN0YW5jZS5wcmVzc0tleShrZXlzW2tleV0pO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbGVhc2VLZXkoa2V5c1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTYXZlIG5ldyBzdGF0ZSBmb3IgbmV4dCBsb29wXG4gICAgICBzYXZlU3RhdGUoZ2FtZXBhZCk7XG4gICAgfVxuXG4gICAgLy8gS2VlcCBwb2xsaW5nXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHBvbGxHYW1lcGFkcyk7XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlU3RhdGUoZ2FtZXBhZCkge1xuICAgIGdhbWVwYWRzW2dhbWVwYWQuaW5kZXhdID1cbiAgICAgIE9iamVjdC5rZXlzKGtleXMpXG4gICAgICAgICAgICAubWFwKGtleSA9PiBba2V5LCBnYW1lcGFkLmJ1dHRvbnNba2V5XS5wcmVzc2VkXSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgdmFsdWUpID0+IChhY2NbdmFsdWVbMF1dID0gdmFsdWVbMV0sIGFjYyksIHt9KTtcbiAgfVxuXG59O1xuIiwibGV0IGN5Y2xlc1BlckZyYW1lID0gMzA7XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFuY2UgPT4ge1xuICBjb25zdCBrZXlzID0ge1xuICAgIC8vIEFycm93IGtleXNcbiAgICAzODogNSwgXHRcdC8vIHVwXG4gICAgMzc6IDcsIFx0XHQvLyBsZWZ0XG4gICAgMzk6IDksIFx0XHQvLyByaWdodFxuICAgIDQwOiA4LCBcdFx0Ly8gZG93blxuXG4gICAgLy8gMTYga2V5IHBhZFxuICAgIDQ5OiAxLFx0XHQvLyAxXG4gICAgNTA6IDIsXHRcdC8vIDJcbiAgICA1MTogMyxcdFx0Ly8gM1xuICAgIDUyOiAweEMsXHQvLyA0XG4gICAgODE6IDQsIFx0XHQvLyBRXG4gICAgODc6IDUsIFx0XHQvLyBXXG4gICAgNjk6IDYsIFx0XHQvLyBFXG4gICAgODI6IDB4RCwgXHQvLyBSXG4gICAgNjU6IDcsIFx0XHQvLyBBXG4gICAgODM6IDgsIFx0XHQvLyBTXG4gICAgNjg6IDksIFx0XHQvLyBEXG4gICAgNzA6IDB4RSwgXHQvLyBGXG4gICAgOTA6IDB4QSwgXHQvLyBaXG4gICAgODg6IDAsIFx0XHQvLyBYXG4gICAgNjc6IDB4QiwgXHQvLyBDXG4gICAgODY6IDB4RiwgXHQvLyBWXG5cbiAgICAvLyBPdGhlciBudW1iZXIga2V5c1xuICAgIDQ4OiAwLFxuICAgIDUzOiA1LFxuICAgIDU0OiA2LFxuICAgIDU1OiA3LFxuICAgIDU2OiA4LFxuICAgIDU3OiA5LFxuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG4gICAgaWYgKCAhaW5zdGFuY2UgKSByZXR1cm47XG4gICAgc3dpdGNoKGUua2V5Q29kZSkge1xuICAgICAgY2FzZSAxMzogIC8vIEVudGVyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZS5kdW1wU3RhdHVzKCk7XG4gICAgICBjYXNlIDE4NzogLy8gK1xuICAgICAgICBjeWNsZXNQZXJGcmFtZSAqPSAyO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2Uuc2V0Q3ljbGVzUGVyRnJhbWUoY3ljbGVzUGVyRnJhbWUpO1xuICAgICAgY2FzZSAxODk6IC8vIC1cbiAgICAgICAgY3ljbGVzUGVyRnJhbWUgLz0gMjtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnNldEN5Y2xlc1BlckZyYW1lKGN5Y2xlc1BlckZyYW1lKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmICgga2V5c1tlLmtleUNvZGVdIClcbiAgICAgICAgICBpbnN0YW5jZS5wcmVzc0tleShrZXlzW2Uua2V5Q29kZV0pO1xuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiB7XG4gICAgaWYgKCBpbnN0YW5jZSAmJiBrZXlzW2Uua2V5Q29kZV0gKVxuICAgICAgaW5zdGFuY2UucmVsZWFzZUtleShrZXlzW2Uua2V5Q29kZV0pO1xuICB9KTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcua2V5Ym9hcmQgYnV0dG9uJykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKCkgPT4ge1xuICAgICAgaW5zdGFuY2UucHJlc3NLZXkoYnV0dG9uLmRhdGFzZXQudmFsdWUpO1xuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XG4gICAgICBpbnN0YW5jZS5yZWxlYXNlS2V5KGJ1dHRvbi5kYXRhc2V0LnZhbHVlKTtcbiAgICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gIH0pO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gbWVzc2FnZSA9PiB7XG4gIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RpZmljYXRpb24nKTtcbiAgbm90aWZpY2F0aW9uLmlubmVyVGV4dCA9IG1lc3NhZ2U7XG4gIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgc2V0VGltZW91dCgoKSA9PiBub3RpZmljYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyksIDUwMDApO1xufVxuIiwibGV0IGdhaW5Ob2RlLCBvc2NpbGxhdG9yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcGxheVNvdW5kOiAocGxheWluZ1BhdHRlcm4sIHBhdHRlcm4sIHBpdGNoKSA9PiB7XG4gICAgaWYgKCBwbGF5aW5nUGF0dGVybiApIHtcbiAgICAgIC8vIFBsYXkgWE8tQ2hpcCBwYXR0ZXJuIGF0IHBpdGNoXG4gICAgICAvLyBIb25lc3RseSwgSSBoYXZlIG5vIGlkZWEgaG93IHRvIGdvIGZyb20gYSBwYXR0ZXJuIGFuZCBhIHBpdGNoIHRvIHNvbWVcbiAgICAgIC8vIHNvdW5kIGluIHRoZSBicm93c2VyLiBTbyB0aGlzIGlzIGEgVE9ETy4gRGlzYWJsZSBzb3VuZCBmb3Igbm93IGl0IHdlXG4gICAgICAvLyB1c2UgWE8tQ2hpcCBzb3VuZCAoYmVjYXVzZSBvdGhlcndpc2UgaXQncyBqdXN0IGFubm95aW5nKS5cblxuICAgICAgLy8gVGhpcyBtYWtlcyBpbnRlcmVzdGluZyBub2lzZXMsIGJ1dCBpcyBub3QgdGhlIHJlYWwgZGVhbDpcbiAgICAgIC8vIHNldFZvbHVtZSgwLjEpO1xuICAgICAgLy8gb3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSBwaXRjaCAvIDQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFZvbHVtZSgwLjEpO1xuICAgIH1cbiAgfSxcbiAgc3RvcFNvdW5kOiAoKSA9PiB7XG4gICAgc2V0Vm9sdW1lKDApO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRWb2x1bWUoZ2Fpbikge1xuICAvLyBTb3VuZCBtYXkgb25seSBwbGF5IGFmdGVyIGEgXCJ1c2VyIGdlc3R1cmVcIiwgc28gZG8gaXQgdGhpcyB3YXk6XG4gIGlmICggIWdhaW5Ob2RlICkgc2V0dXBTb3VuZCgpO1xuICBnYWluTm9kZS5nYWluLnZhbHVlID0gZ2Fpbjtcbn1cblxuZnVuY3Rpb24gc2V0dXBTb3VuZCgpIHtcbiAgY29uc3QgYXVkaW9DdHggPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCB8fCB3aW5kb3cuYXVkaW9Db250ZXh0KTtcblxuICBvc2NpbGxhdG9yID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpO1xuICBnYWluTm9kZSA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcblxuICBnYWluTm9kZS5nYWluLnZhbHVlID0gMDtcbiAgb3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSA2MDA7XG4gIG9zY2lsbGF0b3IudHlwZSA9ICd0cmlhbmdsZSc7XG5cbiAgb3NjaWxsYXRvci5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgZ2Fpbk5vZGUuY29ubmVjdChhdWRpb0N0eC5kZXN0aW5hdGlvbik7XG5cbiAgb3NjaWxsYXRvci5zdGFydCgpO1xufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qXG4gKiBUaGlzIGNsYXNzIGluc3RhbGxzIG9uZSBzaW5nbGUgY2xpY2sgaGFuZGxlciBvbiB0aGUgd2hvbGUgZG9jdW1lbnQsIGFuZFxuICogZXZhbHVhdGVzIHdoaWNoIGNhbGxiYWNrIHRvIGNhbGwgYXQgY2xpY2sgdGltZSwgYmFzZWQgb24gdGhlIGVsZW1lbnQgdGhhdCBoYXNcbiAqIGJlZW4gY2xpY2tlZC4gVGhpcyBhbGxvd3MgdXMgdG8gc3dhcCBvdXQgYW5kIHJlcmVuZGVyIHdob2xlIHNlY3Rpb25zIG9mIHRoZVxuICogRE9NIHdpdGhvdXQgaGF2aW5nIHRvIHJlaW5zdGFsbCBhIGJ1bmNoIG9mIGNsaWNrIGhhbmRsZXJzIGVhY2ggdGltZS4gVGhpc1xuICogbmljZWx5IGRlY291cGxlcyB0aGUgcmVuZGVyIGxvZ2ljIGZyb20gdGhlIGNsaWNrIGV2ZW50IG1hbmFnZW1lbnQgbG9naWMuXG4gKlxuICogVG8gbWFrZSBzdXJlIHdlIHJlYWxseSBvbmx5IGluc3RhbGwgYSBzaW5nbGUgY2xpY2sgaGFuZGxlciwgeW91IGNhbiB1c2UgdGhlXG4gKiBzaW5nbGV0b24gcGF0dGVybiBhbmQgYXNrIGZvciBgQ2xpY2suaW5zdGFuY2UoKWAgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ld1xuICogb2JqZWN0LlxuICovXG5cbmNsYXNzIENsaWNrIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9oYW5kbGVycyA9IHt9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAgICAgKGUpID0+IHRoaXMuX2NhbGxIYW5kbGVyKCdjbGljaycsICAgICBlKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHRoaXMuX2NhbGxIYW5kbGVyKCdtb3VzZWRvd24nLCBlKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICAgKGUpID0+IHRoaXMuX2NhbGxIYW5kbGVyKCdtb3VzZXVwJywgICBlKSk7XG4gIH1cblxuICByZWdpc3RlcihzZWxlY3RvciwgaGFuZGxlcnMgPSB7Y2xpY2s6IG51bGwsIG1vdXNlZG93bjogbnVsbCwgbW91c2V1cDogbnVsbH0pIHtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXJzID09ICdmdW5jdGlvbicpIGhhbmRsZXJzID0geyBjbGljazogaGFuZGxlcnMgfTtcbiAgICB0aGlzLl9oYW5kbGVyc1tzZWxlY3Rvcl0gPSB0aGlzLl9oYW5kbGVyc1tzZWxlY3Rvcl0gfHwgW107XG4gICAgdGhpcy5faGFuZGxlcnNbc2VsZWN0b3JdLnB1c2goaGFuZGxlcnMpO1xuICB9XG5cbiAgX2NhbGxIYW5kbGVyKHR5cGUsIGUpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLl9oYW5kbGVycykuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KHNlbGVjdG9yKSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzW3NlbGVjdG9yXS5tYXAoKGgpID0+IGhbdHlwZV0pO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicgJiYgIWUuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgICAgIGhhbmRsZXIoZSwgc2VsZWN0b3IpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbn1cblxuQ2xpY2suaW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCEhQ2xpY2suX2luc3RhbmNlKSByZXR1cm4gQ2xpY2suX2luc3RhbmNlO1xuICByZXR1cm4gQ2xpY2suX2luc3RhbmNlID0gbmV3IENsaWNrKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENsaWNrO1xuIiwiLypcbiAqIFRoaXMgY2xhc3MgaW5zdGFsbHMgc2luZ2xlIGRyYWcgZXZlbnQgaGFuZGxlcnMgb24gdGhlIHdob2xlIGRvY3VtZW50LCBhbmRcbiAqIGV2YWx1YXRlcyB3aGljaCBlbGVtZW50IHRoZXkgaW5mbHVlbmNlIGF0IGRyYWcgdGltZS4gSWYgeW91IGRyb3AgYSBmaWxlIHRoZVxuICogcmVsZXZhbnQgY2FsbGJhY2sgZ2V0cyBjYWxsZWQsIGJhc2VkIG9uIHRoZSBlbGVtZW50IHRoYXQgdGhlIGZpbGUgd2FzIGRyb3BwZWRcbiAqIG9uLiBUaGlzIGFsbG93cyB1cyB0byBzd2FwIG91dCBhbmQgcmVyZW5kZXIgd2hvbGUgc2VjdGlvbnMgb2YgdGhlIERPTSB3aXRob3V0XG4gKiBoYXZpbmcgdG8gcmVpbnN0YWxsIGEgYnVuY2ggb2YgZXZlbnQgaGFuZGxlcnMgZWFjaCB0aW1lLiBUaGlzIG5pY2VseVxuICogZGVjb3VwbGVzIHRoZSByZW5kZXIgbG9naWMgZnJvbSB0aGUgZHJhZyBldmVudCBtYW5hZ2VtZW50IGxvZ2ljLlxuICpcbiAqIFRvIG1ha2Ugc3VyZSB3ZSByZWFsbHkgb25seSBpbnN0YWxsIHNpbmdsZSBoYW5kbGVycywgeW91IGNhbiB1c2UgdGhlXG4gKiBzaW5nbGV0b24gcGF0dGVybiBhbmQgYXNrIGZvciBgRmlsZVRhcmdldC5pbnN0YW5jZSgpYCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3XG4gKiBvYmplY3QuXG4gKi9cblxuaW1wb3J0IENsaWNrIGZyb20gJy4vY2xpY2snO1xuXG5jbGFzcyBGaWxlVGFyZ2V0IHtcblxuICBjb25zdHJ1Y3RvcihkcmFnQ2xhc3MgPSAnZHJhZ2dpbmcnKSB7XG4gICAgdGhpcy5fZHJhZ0NsYXNzID0gZHJhZ0NsYXNzO1xuICAgIHRoaXMuX2hhbmRsZXJzICA9IHt9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAgKGUpID0+IHRoaXMuX2RyYWdPdmVyKGUpKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoZSkgPT4gdGhpcy5fZHJhZ0xlYXZlKGUpKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgICAgICAoZSkgPT4gdGhpcy5fZHJvcChlKSk7XG4gIH1cblxuICByZWdpc3RlcihzZWxlY3RvciwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9oYW5kbGVyc1tzZWxlY3Rvcl0gPSBjYWxsYmFjaztcbiAgICBDbGljay5pbnN0YW5jZSgpLnJlZ2lzdGVyKHNlbGVjdG9yLCAoZSwgcykgPT4gdGhpcy5fb3BlbkZpbGVEaWFsb2coZSwgcykpO1xuICB9XG5cbiAgX2RyYWdPdmVyKGUpIHtcbiAgICBpZiAoIXRoaXMuX2lzRHJvcFRhcmdldChlLnRhcmdldCkpIHJldHVybjtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ2NvcHknO1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQodGhpcy5fZHJhZ0NsYXNzKTtcbiAgfVxuXG4gIF9kcmFnTGVhdmUoZSkge1xuICAgIGlmICghdGhpcy5faXNEcm9wVGFyZ2V0KGUudGFyZ2V0KSkgcmV0dXJuO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZHJhZ0NsYXNzKTtcbiAgfVxuXG4gIF9kcm9wKGUpIHtcbiAgICBsZXQgc2VsZWN0b3IgPSB0aGlzLl9pc0Ryb3BUYXJnZXQoZS50YXJnZXQpO1xuICAgIGlmICghc2VsZWN0b3IpIHJldHVybjtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdDbGFzcyk7XG4gICAgdGhpcy5faGFuZGxlRmlsZShzZWxlY3RvciwgZSwgZS5kYXRhVHJhbnNmZXIuZmlsZXNbMF0pO1xuICB9XG5cbiAgX2lzRHJvcFRhcmdldCh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5faGFuZGxlcnMpLmZpbmQoKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAodGFyZ2V0LmNsb3Nlc3Qoc2VsZWN0b3IpKSByZXR1cm4gc2VsZWN0b3I7XG4gICAgfSkgfHwgZmFsc2U7XG4gIH1cblxuICBfb3BlbkZpbGVEaWFsb2coZSwgc2VsZWN0b3IpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQudHlwZSAgPSAnZmlsZSc7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGMpID0+XG4gICAgICB0aGlzLl9oYW5kbGVGaWxlKHNlbGVjdG9yLCBlLCBjLnRhcmdldC5maWxlc1swXSlcbiAgICApO1xuICAgIGlucHV0LmNsaWNrKCk7XG4gIH1cblxuICBfaGFuZGxlRmlsZShzZWxlY3RvciwgZSwgZmlsZSkge1xuICAgIHRoaXMuX3JlYWRGaWxlKGZpbGUpXG4gICAgICAgIC50aGVuKChyKSA9PiB0aGlzLl9oYW5kbGVyc1tzZWxlY3Rvcl0oZmlsZSwgciwgZSkpO1xuICB9XG5cbiAgX3JlYWRGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiByZXNvbHZlKGUudGFyZ2V0LnJlc3VsdCkpO1xuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgfSk7XG4gIH1cblxufVxuXG5GaWxlVGFyZ2V0Lmluc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gIGlmICghIUZpbGVUYXJnZXQuX2luc3RhbmNlKSByZXR1cm4gRmlsZVRhcmdldC5faW5zdGFuY2U7XG4gIHJldHVybiBGaWxlVGFyZ2V0Ll9pbnN0YW5jZSA9IG5ldyBGaWxlVGFyZ2V0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpbGVUYXJnZXQ7XG4iLCIvKipcbiAqIFRoaXMgaXMgYSB2ZXJ5IHNpbXBsZSByb3V0aW5nIGNsYXNzIHRoYXQgbGlzdGVucyB0byBsb2NhdGlvbiBoYXNoIGNoYW5nZXMgYW5kXG4gKiBjbGlja3Mgb24gbGlua3MgdG8gcmVnaXN0ZXJlZCByb3V0ZXMuXG4gKlxuICogWW91IGhhdmUgdG8gZXhwbGljaXRseSBkZWZpbmUgdGhlIHJvdXRlcyB0aGF0IHlvdSB3aXNoIHRvIHVzZSwgc28gd2UgZG9uJ3RcbiAqIGNsYXNoICh0b28gbXVjaCkgd2l0aCBkZWVwLWxpbmtpbmcgdG8gbmFtZWQgYW5jaG9ycyBvbiB5b3VyIHBhZ2UuIEFuZCBhbHNvXG4gKiBiZWNhdXNlIGl0IGVuYWJsZXMgeW91IHRvIGhhbmRsZSBkaWZmZXJlbnQgcm91dGVzIHdpdGggZGlmZmVyZW50IGZ1bmN0aW9ucy5cbiAqL1xuXG5pbXBvcnQgQ2xpY2sgZnJvbSAnLi9jbGljayc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvdXRlciB7XG5cbiAgY29uc3RydWN0b3Iocm91dGVzID0gZmFsc2UsIGhhbmRsZXIgPSBudWxsKSB7XG4gICAgdGhpcy5fcm91dGVzID0gW107XG4gICAgaWYgKHJvdXRlcykgdGhpcy5hZGRSb3V0ZXMocm91dGVzLCBoYW5kbGVyKTtcbiAgfVxuXG4gIGluc3RhbGwoKSB7XG4gICAgQ2xpY2suaW5zdGFuY2UoKS5yZWdpc3RlcignYVtocmVmXScsICAoZSkgPT4gdGhpcy5faGFuZGxlQ2xpY2soZSkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKGUpID0+IHRoaXMuX2hhbmRsZU5hdmlnYXRpb25FdmVudChlKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAgICAgICAoZSkgPT4gdGhpcy5faGFuZGxlTmF2aWdhdGlvbkV2ZW50KGUpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFkZFJvdXRlKHJvdXRlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5fcm91dGVzLnB1c2goW3JvdXRlLCBoYW5kbGVyXSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZGRSb3V0ZXMocm91dGVzLCBoYW5kbGVyID0gbnVsbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJvdXRlcykpXG4gICAgICByb3V0ZXMuZm9yRWFjaCgocm91dGUpID0+IHRoaXMuYWRkUm91dGUocm91dGUsIGhhbmRsZXIpKTtcbiAgICBlbHNlXG4gICAgICBPYmplY3Qua2V5cyhyb3V0ZXMpLmZvckVhY2gocm91dGUgPT4gdGhpcy5hZGRSb3V0ZShyb3V0ZSwgcm91dGVzW3JvdXRlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcm91dGUocm91dGUsIGV2bnQpIHtcbiAgICBjb25zdCBtYXRjaCA9IHRoaXMuX21hdGNoaW5nUm91dGUocm91dGUpO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaC5yb3V0ZXIpICByZXR1cm4gbWF0Y2gucm91dGVyLnJvdXRlKG1hdGNoLnN1YnBhdGgsIGV2bnQpO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaC5oYW5kbGVyKSByZXR1cm4gbWF0Y2guaGFuZGxlcihtYXRjaC5yb3V0ZSwgbWF0Y2gubWF0Y2hlcywgZXZudCk7XG4gIH1cblxuICBfaGFuZGxlQ2xpY2soZXZudCkge1xuICAgIGxldCBsaW5rID0gZXZudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgaWYgKCFsaW5rLnN0YXJ0c1dpdGgoJyMnKSkgcmV0dXJuOyAgICAgICAvLyBPbmx5IGhhbmRsZSBoYXNoIGxpbmtzXG4gICAgbGluayA9IGxpbmsuc3Vic3RyKDEpO1xuICAgIGlmICghdGhpcy5fbWF0Y2hpbmdSb3V0ZShsaW5rKSkgcmV0dXJuOyAgLy8gT25seSBoYW5kbGUgcmVnaXN0ZXJlZCByb3V0ZXNcbiAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGxpbms7XG4gICAgZXZudC5wcmV2ZW50RGVmYXVsdCgpOyAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGZyb20ganVtcGluZyB0byBhbmNob3JcbiAgfVxuXG4gIF9oYW5kbGVOYXZpZ2F0aW9uRXZlbnQoZXZudCkge1xuICAgIGxldCBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2hcbiAgICBpZiAoaGFzaC5zdGFydHNXaXRoKCcjJykpIGhhc2ggPSBoYXNoLnN1YnN0cigxKTtcbiAgICB0aGlzLnJvdXRlKGhhc2gsIGV2bnQpO1xuICB9XG5cbiAgX21hdGNoaW5nUm91dGUocm91dGUpIHtcbiAgICByZXR1cm4gcm91dGUgJiYgKCB0aGlzLl9zdWJSb3V0ZXJNYXRjaChyb3V0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHJpbmdNYXRjaChyb3V0ZSkgICAgfHxcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWdFeHBNYXRjaChyb3V0ZSkgICAgICAgKTtcbiAgfVxuXG4gIF9zdWJSb3V0ZXJNYXRjaChyb3V0ZSkge1xuICAgIGNvbnN0IG1hdGNoID0gdGhpcy5fcm91dGVzLmZpbHRlcihyID0+IHJbMV0gaW5zdGFuY2VvZiBSb3V0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChyID0+IHJvdXRlLnN0YXJ0c1dpdGgoclswXSArICcvJykgfHwgcm91dGUgPT0gclswXSk7XG5cbiAgICByZXR1cm4gbWF0Y2ggJiYge1xuICAgICAgcm91dGVyOiAgbWF0Y2hbMV0sXG4gICAgICBzdWJwYXRoOiByb3V0ZS5zdWJzdHIobWF0Y2hbMF0ubGVuZ3RoICsgMSlcbiAgICB9O1xuICB9XG5cbiAgX3N0cmluZ01hdGNoKHJvdXRlKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0aGlzLl9yb3V0ZXMuZmluZChyID0+IHJvdXRlID09IHJbMF0pO1xuXG4gICAgcmV0dXJuIG1hdGNoICYmIHtcbiAgICAgIHJvdXRlOiAgIG1hdGNoWzBdLFxuICAgICAgaGFuZGxlcjogbWF0Y2hbMV1cbiAgICB9O1xuICB9XG5cbiAgX3JlZ0V4cE1hdGNoKHJvdXRlKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0aGlzLl9yb3V0ZXMuZmlsdGVyKHIgPT4gclswXSBpbnN0YW5jZW9mIFJlZ0V4cClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKHIgPT4gcm91dGUubWF0Y2goclswXSkpO1xuXG4gICAgcmV0dXJuIG1hdGNoICYmIHtcbiAgICAgIHJvdXRlOiAgIG1hdGNoWzBdLFxuICAgICAgaGFuZGxlcjogbWF0Y2hbMV0sXG4gICAgICBtYXRjaGVzOiByb3V0ZS5tYXRjaChtYXRjaFswXSlcbiAgICB9O1xuICB9XG5cbn1cbiIsImltcG9ydCBDbGljayAgICAgIGZyb20gJy4vY2xpY2snO1xuaW1wb3J0IEZpbGVUYXJnZXQgZnJvbSAnLi9maWxldGFyZ2V0JztcbmltcG9ydCBSb3V0ZXIgICAgIGZyb20gJy4vcm91dGVyJztcbmltcG9ydCBFbmVyZ2l6ZSAgIGZyb20gJy4vZW5lcmdpemUnO1xuXG5jb25zdCBUaGltYmxlZnVsID0ge1xuICBDbGljaywgRmlsZVRhcmdldCwgUm91dGVyLCBFbmVyZ2l6ZVxufTtcblxuZXhwb3J0IGRlZmF1bHQgVGhpbWJsZWZ1bDtcbndpbmRvdy5UaGltYmxlZnVsID0gVGhpbWJsZWZ1bDtcbiIsIi8qKlxuICogR2l2ZW4gYSBzY29wZSB0aGlzIGNsYXNzIGFkZHMgYSBidW5jaCBvZiBiZWhhdmlvdXIgdG8gZWxlbWVudHMgdGhhdFxuICogeW91IGRlZmluZSB0aHJvdWdoIGRhdGEgYXR0cmlidXRlcy4gVGhpcyBiZWhhdmlvdXIgaXMgYmFzZWQgYXJvdW5kIGFkZGluZ1xuICogb3IgcmVtb3ZpbmcgYW4gJ2FjdGl2ZScgY2xhc3Mgd2hlbiBlbGVtZW50cyBhcmUgY2xpY2tlZDpcbiAqXG4gKiAgLSBkYXRhLW9wZW4g4oCUIEEgc2VsZWN0b3IgdG8gcHV0IHRoZSAnYWN0aXZlJyBjbGFzcyBvbiB3aGVuIGNsaWNrZWRcbiAqICAtIGRhdGEtY2xvc2Ug4oCUIEEgc2VsZWN0b3IgdG8gcmVtb3ZlIHRoZSAnYWN0aXZlJyBjbGFzcyBmcm9tIHdoZW4gY2xpY2tlZFxuICogIC0gZGF0YS10b2dnbGUg4oCUIEEgc2VsZWN0b3IgdG8gdG9nZ2xlIHRoZSAnYWN0aXZlJyBjbGFzcyBvbiB3aGVuIGNsaWNrZWRcbiAqICAtIGRhdGEtZ3JvdXAg4oCUIElmIEkgZ2V0IHRoZSAnYWN0aXZlJyBjbGFzcywgcmVtb3ZlIGl0IGZyb20gb3RoZXJzIGluIG15IGdyb3VwXG4gKiAgLSBkYXRhLXRpbWVyIOKAlCBJZiBJIGdldCB0aGUgJ2FjdGl2ZScgY2xhc3MsIHJlbW92ZSBpdCBhZ2FpbiBhZnRlciB0aGlzIG1hbnkgbWlsbGlzZWNvbmRzXG4gKiAgLSBkYXRhLWZvbGxvd2VyIOKAlCBBIHNlbGVjdG9yIGZvciBhbm90aGVyIGVsZW1lbnQgdGhhdCBmb2xsb3dzIG15IGJlaGF2aW91clxuICpcbiAqIElmIHlvdSB3aXNoLCB5b3UgY2FuIG92ZXJyaWRlIHRoZSBjbGFzcyBuYW1lIGFuZCB0aGUgbmFtZXMgb2YgYWxsIHRoZVxuICogYXR0cmlidXRlcyBhcyBvcHRpb25zIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqL1xuXG5pbXBvcnQgQ2xpY2sgZnJvbSAnLi9jbGljayc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZXJnaXplIHtcblxuICBjb25zdHJ1Y3RvcihzY29wZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5fc2NvcGUgICA9IHNjb3BlO1xuICAgIHRoaXMuX29wdGlvbnMgPSB0aGlzLl9ub3JtYWxpemVPcHRpb25zKG9wdGlvbnMpO1xuXG4gICAgQ2xpY2suaW5zdGFuY2UoKS5yZWdpc3RlcihgJHtzY29wZX0gWyR7dGhpcy5fb3B0aW9ucy5vcGVufV0sICR7c2NvcGV9IFske3RoaXMuX29wdGlvbnMuY2xvc2V9XSwgJHtzY29wZX0gWyR7dGhpcy5fb3B0aW9ucy50b2dnbGV9XWAsIChlKSA9PiB0aGlzLl9oYW5kbGVDbGljayhlKSk7XG4gIH1cblxuICBfbm9ybWFsaXplT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgY2xhc3M6ICAgICdhY3RpdmUnLFxuICAgICAgb3BlbjogICAgICdkYXRhLW9wZW4nLFxuICAgICAgY2xvc2U6ICAgICdkYXRhLWNsb3NlJyxcbiAgICAgIHRvZ2dsZTogICAnZGF0YS10b2dnbGUnLFxuICAgICAgZ3JvdXA6ICAgICdkYXRhLWdyb3VwJyxcbiAgICAgIHRpbWVyOiAgICAnZGF0YS10aW1lcicsXG4gICAgICBmb2xsb3dlcjogJ2RhdGEtZm9sbG93ZXInXG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cblxuICBfaGFuZGxlQ2xpY2soZXZudCkge1xuICAgIC8vIFdoaWNoIGVsZW1lbnQgZGlkIHdlIGNsaWNrP1xuICAgIGNvbnN0IHRhcmdldCA9IGV2bnQudGFyZ2V0LmNsb3Nlc3QoYFske3RoaXMuX29wdGlvbnMub3Blbn1dLCBbJHt0aGlzLl9vcHRpb25zLmNsb3NlfV0sIFske3RoaXMuX29wdGlvbnMudG9nZ2xlfV1gKTtcblxuICAgIC8vIFdoYXQgZG9lcyB0aGUgY2xpY2tlZCBlbGVtZW50IHdpc2ggdG8gb3BlbiwgY2xvc2Ugb3IgdG9nZ2xlP1xuICAgIGNvbnN0IGNsb3NlU2VsZWN0b3IgID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLl9vcHRpb25zLmNsb3NlKTtcbiAgICBjb25zdCBvcGVuU2VsZWN0b3IgICA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5fb3B0aW9ucy5vcGVuKTtcbiAgICBjb25zdCB0b2dnbGVTZWxlY3RvciA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5fb3B0aW9ucy50b2dnbGUpO1xuXG4gICAgbGV0IGNsb3NlRWxlbWVudHMgPSBjbG9zZVNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLl9zY29wZX0gJHtjbG9zZVNlbGVjdG9yfWApICA6IFtdO1xuICAgIGxldCBvcGVuRWxlbWVudHMgID0gIG9wZW5TZWxlY3RvciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9ICR7b3BlblNlbGVjdG9yfWApICAgOiBbXTtcblxuICAgIC8vIEFkZCBlbGVtZW50cyB0aGF0IG5lZWQgdG8gYmUgdG9nZ2xlZFxuICAgIGNsb3NlRWxlbWVudHMgPSBbLi4uY2xvc2VFbGVtZW50cywgLi4uKHRvZ2dsZVNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLl9zY29wZX0gJHt0b2dnbGVTZWxlY3Rvcn0uJHt0aGlzLl9vcHRpb25zLmNsYXNzfWApICAgICAgIDogW10pXTtcbiAgICBvcGVuRWxlbWVudHMgID0gWy4uLm9wZW5FbGVtZW50cywgIC4uLih0b2dnbGVTZWxlY3RvciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9ICR7dG9nZ2xlU2VsZWN0b3J9Om5vdCguJHt0aGlzLl9vcHRpb25zLmNsYXNzfSlgKSA6IFtdKV07XG5cbiAgICB0aGlzLl9jbG9zZShjbG9zZUVsZW1lbnRzKTtcbiAgICB0aGlzLl9vcGVuKG9wZW5FbGVtZW50cyk7XG5cbiAgICAvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBldmVudCwgZG9uJ3QgdHJ5IHRvIGV2YWx1YXRlIGl0IGFueSBmdXJ0aGVyXG4gICAgZXZudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2bnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBfY2xvc2UoZWxlbWVudHMpIHtcbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb3B0aW9ucy5jbGFzcyk7XG4gICAgICB0aGlzLl9jbG9zZSh0aGlzLl9mb2xsb3dlcnMoZWxlbWVudCkpO1xuICAgIH0pO1xuICB9XG5cbiAgX29wZW4oZWxlbWVudHMpIHtcbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9jbG9zZSh0aGlzLl9ncm91cChlbGVtZW50KSk7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5jbGFzcyk7XG4gICAgICB0aGlzLl9vcGVuKHRoaXMuX2ZvbGxvd2VycyhlbGVtZW50KSk7XG5cbiAgICAgIC8vIFNldCBzZWxmLWRlc3RydWN0IHRpbWVyIGlmIG5lZWRlZFxuICAgICAgY29uc3QgZGVsYXkgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLl9vcHRpb25zLnRpbWVyKTtcbiAgICAgIGlmIChkZWxheSkgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5fY2xvc2UoW2VsZW1lbnRdKSwgZGVsYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgX2dyb3VwKGVsZW1lbnQpIHtcbiAgICBjb25zdCBncm91cCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMuX29wdGlvbnMuZ3JvdXApO1xuICAgIGlmICghZ3JvdXApIHJldHVybiBbXTtcbiAgICByZXR1cm4gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9IFske3RoaXMuX29wdGlvbnMuZ3JvdXB9PSR7Z3JvdXB9XWApXTtcbiAgfVxuXG4gIF9mb2xsb3dlcnMoZWxlbWVudCkge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5fb3B0aW9ucy5mb2xsb3dlcik7XG4gICAgaWYgKCFzZWxlY3RvcikgcmV0dXJuIFtdO1xuICAgIHJldHVybiBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLl9zY29wZX0gJHtzZWxlY3Rvcn1gKV07XG4gIH1cblxufVxuIiwiaW1wb3J0IFRoaW1ibGVmdWwgZnJvbSAndGhpbWJsZWZ1bCc7XG5jb25zdCB0eXBlcyA9IHJlcXVpcmUoJy4uL3NoYXJlZC90eXBlcycpO1xuXG5pbXBvcnQgd2VsY29tZSBmcm9tIFwiISFiaW5hcnktbG9hZGVyIS4vd2VsY29tZS5jaDhcIjtcbmNvbnN0IHdlbGNvbWVQcm9ncmFtID0gbmV3IFVpbnQ4QXJyYXkod2VsY29tZS5sZW5ndGgpO1xuZm9yIChsZXQgaSA9IDA7IGkgPCB3ZWxjb21lLmxlbmd0aDsgaSsrKVxuICB3ZWxjb21lUHJvZ3JhbVtpXSA9IHdlbGNvbWUuY2hhckNvZGVBdChpKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IEVtdWxhdG9yID0gcmVxdWlyZSgnLi9lbXVsYXRvcicpO1xuICBjb25zdCBrZXlib2FyZCA9IHJlcXVpcmUoJy4va2V5Ym9hcmQnKTtcbiAgY29uc3QgZ2FtZXBhZCA9IHJlcXVpcmUoJy4vZ2FtZXBhZCcpO1xuICBjb25zdCBkaXNwbGF5ID0gcmVxdWlyZSgnLi9kaXNwbGF5Jyk7XG4gIGNvbnN0IHsgcGxheVNvdW5kLCBzdG9wU291bmQgfSA9IHJlcXVpcmUoJy4vc291bmQnKTtcblxuICBjb25zdCBpbnN0YW5jZSA9IG5ldyBFbXVsYXRvcih7IGRpc3BsYXksIHBsYXlTb3VuZCwgc3RvcFNvdW5kIH0pO1xuICBhd2FpdCBpbnN0YW5jZS5pbml0KCk7XG4gIGtleWJvYXJkKGluc3RhbmNlKTtcbiAgZ2FtZXBhZChpbnN0YW5jZSk7XG5cbiAgaW5zdGFuY2UubG9hZFByb2dyYW0odHlwZXMuQVVUTywgd2VsY29tZVByb2dyYW0pO1xuXG4gIGNvbnN0IGZpbGVUYXJnZXQgPSBUaGltYmxlZnVsLkZpbGVUYXJnZXQuaW5zdGFuY2UoKTtcbiAgZmlsZVRhcmdldC5yZWdpc3RlcignI2Rpc3BsYXknLCAoZmlsZSwgZGF0YSkgPT4ge1xuICAgIGlmICggZmlsZS5uYW1lLnN1YnN0cigtNCkgIT0gJy5jaDgnIClcbiAgICAgIHJldHVybiBhbGVydCgnWW91IGNhbiBvbmx5IGxvYWQgKi5jaDggQ0hJUC04IFJPTXMnKTtcbiAgICBkYXRhID0gYXRvYihkYXRhLnNwbGl0KCcsJylbMV0pO1xuICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIoZGF0YS5sZW5ndGgpKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrIClcbiAgICAgIHByb2dyYW1baV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgaW5zdGFuY2UubG9hZFByb2dyYW0odHlwZXMuQVVUTywgcHJvZ3JhbSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIkFVVE8iLCJTVFJJQ1RWSVAiLCJWSVAiLCJCTElORFZJUCIsIlNDSElQIiwiWE9DSElQIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwicmVuZGVyIiwid2lkdGgiLCJoZWlnaHQiLCJieXRlcyIsImltYWdlRGF0YSIsImNyZWF0ZUltYWdlRGF0YSIsImkiLCJkaXNwbGF5T2Zmc2V0Iiwic2lsaWNvbjhPZmZzZXQiLCJkYXRhIiwicHV0SW1hZ2VEYXRhIiwiZ28iLCJHbyIsIldlYkFzc2VtYmx5IiwiaW5zdGFudGlhdGVTdHJlYW1pbmciLCJhc3luYyIsInJlc3AiLCJpbXBvcnRPYmplY3QiLCJzb3VyY2UiLCJhcnJheUJ1ZmZlciIsImluc3RhbnRpYXRlIiwiY29uc3RydWN0b3IiLCJwbGF5U291bmQiLCJzdG9wU291bmQiLCJkaXNwbGF5IiwiT2JqZWN0IiwiYXNzaWduIiwiZW52IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicGxheWluZ1BhdHRlcm4iLCJwYXR0ZXJuIiwicGl0Y2giLCJVaW50OEFycmF5IiwidGhpcyIsIl9jcHUiLCJtZW1vcnkiLCJidWZmZXIiLCJkYXRhUHRyIiwiaW5pdCIsImZldGNoIiwidGhlbiIsInJlc3VsdCIsImluc3RhbmNlIiwicnVuIiwic2V0SW50ZXJ2YWwiLCJjbG9ja1RpY2siLCJjYXRjaCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRDeWNsZXNQZXJGcmFtZSIsIm5ld0N5Y2xlcyIsImxvYWRQcm9ncmFtIiwidHlwZSIsInByb2dyYW0iLCJyZXNldCIsInJhbSIsInJhbVB0ciIsInJhbVNpemUiLCJsZW5ndGgiLCJkdW1wU3RhdHVzIiwicHJlc3NLZXkiLCJrZXkiLCJyZWxlYXNlS2V5Iiwibm90aWZ5IiwiZ2FtZXBhZHMiLCJ1bmFubm91bmNlZEdhbWVwYWRzIiwicnVubmluZyIsImtleXMiLCJwb2xsR2FtZXBhZHMiLCJjdXJyZW50R2FtZXBhZHMiLCJuYXZpZ2F0b3IiLCJnZXRHYW1lcGFkcyIsImdhbWVwYWQiLCJpbmRleCIsImJ1dHRvbnMiLCJwcmVzc2VkIiwic2F2ZVN0YXRlIiwiaW5jbHVkZXMiLCJ3YXJuIiwicHVzaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1hcCIsInJlZHVjZSIsImFjYyIsInZhbHVlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1hcHBpbmciLCJsb2ciLCJpZCIsImZpbHRlciIsImciLCJjeWNsZXNQZXJGcmFtZSIsImtleUNvZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ1dHRvbiIsImRhdGFzZXQiLCJwYXNzaXZlIiwibWVzc2FnZSIsIm5vdGlmaWNhdGlvbiIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lclRleHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiZ2Fpbk5vZGUiLCJvc2NpbGxhdG9yIiwic2V0Vm9sdW1lIiwiZ2FpbiIsImF1ZGlvQ3R4IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiYXVkaW9Db250ZXh0IiwiY3JlYXRlT3NjaWxsYXRvciIsImNyZWF0ZUdhaW4iLCJmcmVxdWVuY3kiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydCIsInNldHVwU291bmQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkNsaWNrIiwiX2hhbmRsZXJzIiwiX2NhbGxIYW5kbGVyIiwicmVnaXN0ZXIiLCJzZWxlY3RvciIsImhhbmRsZXJzIiwiY2xpY2siLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwidGFyZ2V0IiwiY2xvc2VzdCIsImgiLCJoYW5kbGVyIiwiZGVmYXVsdFByZXZlbnRlZCIsIl9pbnN0YW5jZSIsIkZpbGVUYXJnZXQiLCJkcmFnQ2xhc3MiLCJfZHJhZ0NsYXNzIiwiX2RyYWdPdmVyIiwiX2RyYWdMZWF2ZSIsIl9kcm9wIiwiY2FsbGJhY2siLCJzIiwiX29wZW5GaWxlRGlhbG9nIiwiX2lzRHJvcFRhcmdldCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiZHJvcEVmZmVjdCIsIl9oYW5kbGVGaWxlIiwiZmlsZXMiLCJmaW5kIiwiaW5wdXQiLCJjcmVhdGVFbGVtZW50IiwiYyIsImZpbGUiLCJfcmVhZEZpbGUiLCJyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsIlJvdXRlciIsInJvdXRlcyIsIl9yb3V0ZXMiLCJhZGRSb3V0ZXMiLCJpbnN0YWxsIiwiX2hhbmRsZUNsaWNrIiwiX2hhbmRsZU5hdmlnYXRpb25FdmVudCIsImFkZFJvdXRlIiwicm91dGUiLCJBcnJheSIsImlzQXJyYXkiLCJldm50IiwibWF0Y2giLCJfbWF0Y2hpbmdSb3V0ZSIsInJvdXRlciIsInN1YnBhdGgiLCJtYXRjaGVzIiwibGluayIsImdldEF0dHJpYnV0ZSIsInN0YXJ0c1dpdGgiLCJzdWJzdHIiLCJsb2NhdGlvbiIsImhhc2giLCJfc3ViUm91dGVyTWF0Y2giLCJfc3RyaW5nTWF0Y2giLCJfcmVnRXhwTWF0Y2giLCJSZWdFeHAiLCJUaGltYmxlZnVsIiwic2NvcGUiLCJvcHRpb25zIiwiX3Njb3BlIiwiX29wdGlvbnMiLCJfbm9ybWFsaXplT3B0aW9ucyIsIm9wZW4iLCJjbG9zZSIsInRvZ2dsZSIsImNsYXNzIiwiZ3JvdXAiLCJ0aW1lciIsImZvbGxvd2VyIiwiY2xvc2VTZWxlY3RvciIsIm9wZW5TZWxlY3RvciIsInRvZ2dsZVNlbGVjdG9yIiwiY2xvc2VFbGVtZW50cyIsIm9wZW5FbGVtZW50cyIsIl9jbG9zZSIsIl9vcGVuIiwiZWxlbWVudHMiLCJlbGVtZW50IiwiX2ZvbGxvd2VycyIsIl9ncm91cCIsImRlbGF5IiwidHlwZXMiLCJ3ZWxjb21lUHJvZ3JhbSIsIkVtdWxhdG9yIiwia2V5Ym9hcmQiLCJuYW1lIiwiYWxlcnQiLCJhdG9iIiwic3BsaXQiLCJBcnJheUJ1ZmZlciIsImNoYXJDb2RlQXQiXSwic291cmNlUm9vdCI6IiJ9