(()=>{var e={7:(e,t,s)=>{const n=s(209);e.exports=e=>{const t={};let s=[],a=!1;const r={12:5,14:7,15:9,13:8,0:6,1:4};function o(){if(!a)return;const n=navigator.getGamepads();if(n){for(const a of n)if(a)if(t[a.index]){for(const s in r)a.buttons[s].pressed!=t[a.index][s]&&(a.buttons[s].pressed?e.pressKey(r[s]):e.releaseKey(r[s]));i(a)}else s.includes(a.index)||(console.warn("Got an unannounced gamepad:",a),s.push(a.index));requestAnimationFrame(o)}}function i(e){t[e.index]=Object.keys(r).map(t=>[t,e.buttons[t].pressed]).reduce((e,t)=>(e[t[0]]=t[1],e),{})}window.addEventListener("gamepadconnected",e=>{if("standard"!=e.gamepad.mapping)return s.push(e.gamepad.index),console.log(`🎮 Ignoring gamepad ${e.gamepad.id} because it is not a 'standard mapping' gamepad`);n(`🎮 Connected to gamepad "${e.gamepad.id}"`),i(e.gamepad),a||(a=!0,requestAnimationFrame(o))}),window.addEventListener("gamepaddisconnected",e=>{s.includes(e.gamepad.index)&&(s=s.filter(t=>t!=e.gamepad.index)),t[e.gamepad.index]&&(n(`🎮 Gamepad "${e.gamepad.id}" disconnected`),delete t[e.gamepad.index],0==Object.keys(t).length&&(a=!1))})}},18:e=>{e.exports='\0àabc\0¢,óðe@\0*@ÿ""{ðeÑ%s\bars\b*   Welcomeÿ       to Silicon-8!ÿClick the screenÿor drag a *.ch8ÿfile here ^_^\0dBd E¢ððð\0î\0\0\0\0\0\0  \0\0\0PøPøPx p(ð  @ @ @ p\0\0\0@@@@@ ¨p¨ \0@à@\0\0\0\0@\0\0à\0\0\0\0\0\0  @``@À@@àà`ðà`àððàà`à`ð @@````p`\0\0\0\0@\0@ @@ \0à\0à\0@ @À @\0@`°``ðàààppààààààÀp°`ðà@@@àà   À À àØ¨Ðð°``àà`°pààp`àø    ```¨ØP PP   à @àÀÀ@  À@@@À@ \0\0\0\0\0\0\0à@\0\0\0\0`  `À À\0``  ` `\0@ À`@À\0` `ÀÀ  \0@\0@@ À À@@@@\0 à  \0À   \0@  @\0À À\0` ` \0 À\0@@À@\0   @\0  @@\0  à \0 @@ \0  @\0À@À`@@`À@ @À\0P \0\0'},209:e=>{e.exports=e=>{const t=document.querySelector(".notification");t.innerText=e,t.classList.add("active"),setTimeout(()=>t.classList.remove("active"),5e3)}},518:e=>{const t=document.getElementById("display"),s=t.getContext("2d");e.exports={render:(e,n,a)=>{t.width=e,t.height=n;const r=s.createImageData(e,n);for(let t=0;t<n*e;t++){const e=4*t,s=3*t;r.data[e+0]=a[s+0],r.data[e+1]=a[s+1],r.data[e+2]=a[s+2],r.data[e+3]=255}s.putImageData(r,0,0)}}},543:e=>{e.exports=e=>{const t=document.querySelector(".settings");let s;return t.querySelector("button").addEventListener("click",()=>{const n=t.querySelector('input[name="interpreter"]:checked').value,a=t.querySelector('select[name="speed"]').value;e.loadProgram(n,s),e.setCyclesPerFrame(a),t.classList.remove("active"),e.start()}),e=>{s=e,t.classList.add("active")}}},701:e=>{const t=new Go;WebAssembly.instantiateStreaming||(WebAssembly.instantiateStreaming=async(e,t)=>{const s=await(await e).arrayBuffer();return await WebAssembly.instantiate(s,t)}),e.exports=class{constructor({playSound:e,stopSound:s,display:n}){e||=()=>{},s||=()=>{},this._running=!1,this._stopSound=s,Object.assign(t.importObject.env,{"main.randomByte":()=>255&Math.floor(256*Math.random()),"main.playSound":(t,s,n)=>{s=new Uint8Array(this._cpu.memory.buffer,s,16),e(t,s,n)},"main.stopSound":s,"main.render":(e,t,s)=>{const a=new Uint8Array(this._cpu.memory.buffer,s,e*t*3);n.render(e,t,a)}})}init(){return WebAssembly.instantiateStreaming(fetch("silicon8.wasm"),t.importObject).then(e=>{this._cpu=e.instance.exports,t.run(e.instance),this._interval=setInterval(()=>{this._running&&this._cpu.clockTick()},1e3/60)}).catch(e=>{console.error(e)})}setCyclesPerFrame(e){this._cpu.setCyclesPerFrame(e)}loadProgram(e,t){this._cpu.reset(e);const s=new Uint8Array(this._cpu.memory.buffer,this._cpu.ramPtr(),this._cpu.ramSize());for(let e=512;e<512+t.length;e++)s[e]=t[e-512]}dumpStatus(){this._cpu.dumpStatus()}pressKey(e){this._cpu.pressKey(e)}releaseKey(e){this._cpu.releaseKey(e)}start(){this._running=!0}stop(){this._stopSound(),this._running=!1}}},723:e=>{let t=30;e.exports=e=>{const s={38:5,37:7,39:9,40:8,49:1,50:2,51:3,52:12,81:4,87:5,69:6,82:13,65:7,83:8,68:9,70:14,90:10,88:0,67:11,86:15,48:0,53:5,54:6,55:7,56:8,57:9,32:6,16:4,17:6};window.addEventListener("keydown",n=>{if(e)switch(n.keyCode){case 13:return e.dumpStatus();case 187:return t*=2,e.setCyclesPerFrame(t);case 189:return t/=2,e.setCyclesPerFrame(t);default:e&&Object.keys(s).includes(n.keyCode.toString())&&e.pressKey(s[n.keyCode])}}),window.addEventListener("keyup",t=>{e&&Object.keys(s).includes(t.keyCode.toString())&&e.releaseKey(s[t.keyCode])}),document.querySelectorAll(".keyboard button").forEach(t=>{t.addEventListener("touchstart",()=>{e.pressKey(t.dataset.value)},{passive:!0}),t.addEventListener("touchend",()=>{e.releaseKey(t.dataset.value)},{passive:!0})})}},763:e=>{e.exports={playSound:(e,s,n)=>{e?(t.instance().setToSound(s,n),t.instance().setVolume(3e-4)):(t.instance().setToBleep(),t.instance().setVolume(.1))},stopSound:()=>{t.instance().setVolume(0)}};class t{constructor(){this._audioCtx=new(window.AudioContext||window.webkitAudioContext||window.audioContext),this._oscillator=this._audioCtx.createOscillator(),this._gainNode=this._audioCtx.createGain(),this._oscillator.connect(this._gainNode),this._gainNode.connect(this._audioCtx.destination),this.setVolume(0),this._oscillator.start()}setVolume(e){this._gainNode.gain.value=e}setToBleep(){this._oscillator.frequency.value=600,this._oscillator.type="triangle"}setToSound(e,t){this._oscillator.setPeriodicWave(this._periodicWave(this._patternToBits(e))),this._oscillator.frequency.value=t/128}_patternToBits(e){const t=new Float32Array(512);let s=0;for(const n of e){let e=128;for(;0!=e;){const a=0!=(n&e)?1:0;t[s++]=a,t[s++]=a,t[s++]=a,t[s++]=a,e>>=1}}return t}_periodicWave(e){var t=new Float32Array(e.length),s=this._FFT(e,t);return this._audioCtx.createPeriodicWave(s[0].slice(0,s[0].length/2),s[1].slice(0,s[1].length/2),{disableNormalization:!0})}_FFT(e,t){var s=e.length;if(1==s)return[e,t];for(var n=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),r=new Float32Array(s/2),o=new Float32Array(s/2),i=new Float32Array(s/2),c=new Float32Array(s/2),l=0;l<s;l++)1&l?(i[l>>1]=e[l],c[l>>1]=t[l]):(r[l>>1]=e[l],o[l>>1]=t[l]);for(var d=this._FFT(r,o),u=this._FFT(i,c),h=d[0],p=d[1],_=u[0],g=u[1],m=new Float32Array(s),y=new Float32Array(s),f=(l=0,s/2),v=1,w=0,b=0;l<f;l++){var A=h[l],x=p[l],S=_[l],E=g[l];m[l]=A+v*S-w*E,y[l]=x+v*E+w*S,m[l+f]=A-v*S+w*E,y[l+f]=x-v*E-w*S,b=v*n-w*a,w=v*a+w*n,v=b}return[m,y]}}t.instance=()=>t._instance?t._instance:t._instance=new t},902:e=>{e.exports={AUTO:0,VIP:1,BLINDVIP:2,SCHIP:3,XOCHIP:4}}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";class e{constructor(){this._handlers={},document.addEventListener("click",e=>this._callHandler("click",e)),document.addEventListener("mousedown",e=>this._callHandler("mousedown",e)),document.addEventListener("mouseup",e=>this._callHandler("mouseup",e))}register(e,t={click:null,mousedown:null,mouseup:null}){"function"==typeof t&&(t={click:t}),this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)}_callHandler(e,t){Object.keys(this._handlers).forEach(s=>{null!==t.target.closest(s)&&this._handlers[s].map(t=>t[e]).forEach(e=>{"function"!=typeof e||t.defaultPrevented||e(t,s)})})}}e.instance=function(){return e._instance?e._instance:e._instance=new e};const t=e;class n{constructor(e="dragging"){this._dragClass=e,this._handlers={},document.addEventListener("dragover",e=>this._dragOver(e)),document.addEventListener("dragleave",e=>this._dragLeave(e)),document.addEventListener("drop",e=>this._drop(e))}register(e,s){this._handlers[e]=s,t.instance().register(e,(e,t)=>this._openFileDialog(e,t))}_dragOver(e){this._isDropTarget(e.target)&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy",e.target.classList.add(this._dragClass))}_dragLeave(e){this._isDropTarget(e.target)&&(e.stopPropagation(),e.preventDefault(),e.target.classList.remove(this._dragClass))}_drop(e){let t=this._isDropTarget(e.target);t&&(e.stopPropagation(),e.preventDefault(),e.target.classList.remove(this._dragClass),this._handleFile(t,e,e.dataTransfer.files[0]))}_isDropTarget(e){return Object.keys(this._handlers).find(t=>{if(e.closest(t))return t})||!1}_openFileDialog(e,t){const s=document.createElement("input");s.type="file",s.addEventListener("change",s=>this._handleFile(t,e,s.target.files[0])),s.click()}_handleFile(e,t,s){this._readFile(s).then(n=>this._handlers[e](s,n,t))}_readFile(e){return new Promise((t,s)=>{var n=new FileReader;n.addEventListener("load",e=>t(e.target.result)),n.readAsDataURL(e)})}}n.instance=function(){return n._instance?n._instance:n._instance=new n};const a=n;class r{constructor(e=!1,t=null){this._routes=[],e&&this.addRoutes(e,t)}install(){return t.instance().register("a[href]",e=>this._handleClick(e)),window.addEventListener("hashchange",e=>this._handleNavigationEvent(e)),window.addEventListener("load",e=>this._handleNavigationEvent(e)),this}addRoute(e,t){return this._routes.push([e,t]),this}addRoutes(e,t=null){return Array.isArray(e)?e.forEach(e=>this.addRoute(e,t)):Object.keys(e).forEach(t=>this.addRoute(t,e[t])),this}route(e,t){const s=this._matchingRoute(e);return s&&s.router?s.router.route(s.subpath,t):s&&s.handler?s.handler(s.route,s.matches,t):void 0}_handleClick(e){let t=e.target.getAttribute("href");t.startsWith("#")&&(t=t.substr(1),this._matchingRoute(t)&&(window.location.hash=t,e.preventDefault()))}_handleNavigationEvent(e){let t=window.location.hash;t.startsWith("#")&&(t=t.substr(1)),this.route(t,e)}_matchingRoute(e){return e&&(this._subRouterMatch(e)||this._stringMatch(e)||this._regExpMatch(e))}_subRouterMatch(e){const t=this._routes.filter(e=>e[1]instanceof r).find(t=>e.startsWith(t[0]+"/")||e==t[0]);return t&&{router:t[1],subpath:e.substr(t[0].length+1)}}_stringMatch(e){const t=this._routes.find(t=>e==t[0]);return t&&{route:t[0],handler:t[1]}}_regExpMatch(e){const t=this._routes.filter(e=>e[0]instanceof RegExp).find(t=>e.match(t[0]));return t&&{route:t[0],handler:t[1],matches:e.match(t[0])}}}const o={Click:t,FileTarget:a,Router:r,Energize:class{constructor(e,s={}){this._scope=e,this._options=this._normalizeOptions(s),t.instance().register(`${e} [${this._options.open}], ${e} [${this._options.close}], ${e} [${this._options.toggle}]`,e=>this._handleClick(e))}_normalizeOptions(e){return Object.assign({class:"active",open:"data-open",close:"data-close",toggle:"data-toggle",group:"data-group",timer:"data-timer",follower:"data-follower"},e)}_handleClick(e){const t=e.target.closest(`[${this._options.open}], [${this._options.close}], [${this._options.toggle}]`),s=t.getAttribute(this._options.close),n=t.getAttribute(this._options.open),a=t.getAttribute(this._options.toggle);let r=s?document.querySelectorAll(`${this._scope} ${s}`):[],o=n?document.querySelectorAll(`${this._scope} ${n}`):[];r=[...r,...a?document.querySelectorAll(`${this._scope} ${a}.${this._options.class}`):[]],o=[...o,...a?document.querySelectorAll(`${this._scope} ${a}:not(.${this._options.class})`):[]],this._close(r),this._open(o),e.preventDefault(),e.stopPropagation()}_close(e){e.forEach(e=>{e.classList.remove(this._options.class),this._close(this._followers(e))})}_open(e){e.forEach(e=>{this._close(this._group(e)),e.classList.add(this._options.class),this._open(this._followers(e));const t=e.getAttribute(this._options.timer);t&&window.setTimeout(()=>this._close([e]),t)})}_group(e){const t=e.getAttribute(this._options.group);return t?[...document.querySelectorAll(`${this._scope} [${this._options.group}=${t}]`)]:[]}_followers(e){const t=e.getAttribute(this._options.follower);return t?[...document.querySelectorAll(`${this._scope} ${t}`)]:[]}}},i=o;window.Thimbleful=o;var c=s(18),l=s.n(c);const d=s(902),u=new Uint8Array(l().length);for(let e=0;e<l().length;e++)u[e]=l().charCodeAt(e);window.addEventListener("load",async()=>{const e=s(701),t=s(723),n=s(7),a=s(543),r=s(518),{playSound:o,stopSound:c}=s(763),l=new e({display:r,playSound:o,stopSound:c});await l.init(),t(l),n(l);const h=a(l);l.loadProgram(d.AUTO,u),l.start(),i.FileTarget.instance().register("#display",(e,t)=>{if(".ch8"!=e.name.substr(-4))return alert("You can only load *.ch8 CHIP-8 ROMs");t=atob(t.split(",")[1]);const s=new Uint8Array(new ArrayBuffer(t.length));for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);l.stop(),h(s)})})})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVGLEVBQVMsVUFBRUMsR0FBYyxFQUFRLEtBRW5DaEYsRUFBVyxJQUFJOFMsRUFBUyxDQUFFN04sVUFBU0YsWUFBV0Msb0JBQzlDaEYsRUFBU2tHLE9BQ2Y2TSxFQUFTL1MsR0FDVFMsRUFBUVQsR0FDUixNQUFNZ1QsRUFBZXBQLEVBQVM1RCxHQUU5QkEsRUFBU2dFLFlBQVk0TyxFQUFNcEgsS0FBTXFILEdBQ2pDN1MsRUFBU2tFLFFBRVUsRUFBVzJKLFdBQVc3TixXQUM5QmtOLFNBQVMsV0FBWSxDQUFDOEIsRUFBTXRMLEtBQ3JDLEdBQTZCLFFBQXhCc0wsRUFBS2lFLEtBQUtyQyxRQUFRLEdBQ3JCLE9BQU9zQyxNQUFNLHVDQUNmeFAsRUFBT3lQLEtBQUt6UCxFQUFLMFAsTUFBTSxLQUFLLElBQzVCLE1BQU12UCxFQUFVLElBQUlnQyxXQUFXLElBQUl3TixZQUFZM1AsRUFBS3ZCLFNBQ3BELElBQU0sSUFBSW9CLEVBQUksRUFBR0EsRUFBSUcsRUFBS3ZCLE9BQVFvQixJQUNoQ00sRUFBUU4sR0FBS0csRUFBSzRQLFdBQVcvUCxHQUMvQnZELEVBQVNrSCxPQUNUOEwsRUFBYW5QLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvZ2FtZXBhZC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvd2VsY29tZS5jaDgiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi93ZWItY2xpZW50L25vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi93ZWItY2xpZW50L2VtdWxhdG9yLmpzIiwid2VicGFjazovL3NpbGljb244Ly4vd2ViLWNsaWVudC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL3dlYi1jbGllbnQvc291bmQuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9zaGFyZWQvdHlwZXMuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NpbGljb244L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9ub2RlX21vZHVsZXMvdGhpbWJsZWZ1bC9zcmMvY2xpY2suanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9ub2RlX21vZHVsZXMvdGhpbWJsZWZ1bC9zcmMvZmlsZXRhcmdldC5qcyIsIndlYnBhY2s6Ly9zaWxpY29uOC8uL25vZGVfbW9kdWxlcy90aGltYmxlZnVsL3NyYy9yb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9ub2RlX21vZHVsZXMvdGhpbWJsZWZ1bC9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi9ub2RlX21vZHVsZXMvdGhpbWJsZWZ1bC9zcmMvZW5lcmdpemUuanMiLCJ3ZWJwYWNrOi8vc2lsaWNvbjgvLi93ZWItY2xpZW50L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG5vdGlmeSA9IHJlcXVpcmUoJy4vbm90aWZpY2F0aW9uJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFuY2UgPT4ge1xuXG4gIGNvbnN0IGdhbWVwYWRzID0ge307XG4gIGxldCB1bmFubm91bmNlZEdhbWVwYWRzID0gW107XG4gIGxldCBydW5uaW5nID0gZmFsc2U7XG5cbiAgLy8gRGVmYXVsdCBidXR0b25zIGZvciBhIHN0YW5kYXJkIGNvbnRyb2xsZXJcbiAgY29uc3Qga2V5cyA9IHtcbiAgICAxMjogNSwgLy8gVXBcbiAgICAxNDogNywgLy8gTGVmdFxuICAgIDE1OiA5LCAvLyBSaWdodFxuICAgIDEzOiA4LCAvLyBEb3duXG5cbiAgICAwOiA2LCAgLy8gQVxuICAgIDE6IDQgICAvLyBCXG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dhbWVwYWRjb25uZWN0ZWQnLCBlID0+IHtcbiAgICAvLyBJZ25vcmUgY29udHJvbGxlcnMgdGhhdCBhcmUgbm90IHN0YW5kYXJkIGNvbnRyb2xsZXJzXG4gICAgaWYgKCBlLmdhbWVwYWQubWFwcGluZyAhPSBcInN0YW5kYXJkXCIgKSB7XG4gICAgICB1bmFubm91bmNlZEdhbWVwYWRzLnB1c2goZS5nYW1lcGFkLmluZGV4KTtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhg8J+OriBJZ25vcmluZyBnYW1lcGFkICR7ZS5nYW1lcGFkLmlkfSBiZWNhdXNlIGl0IGlzIG5vdCBhICdzdGFuZGFyZCBtYXBwaW5nJyBnYW1lcGFkYCk7XG4gICAgfVxuXG4gICAgbm90aWZ5KGDwn46uIENvbm5lY3RlZCB0byBnYW1lcGFkIFwiJHtlLmdhbWVwYWQuaWR9XCJgKTtcbiAgICBzYXZlU3RhdGUoZS5nYW1lcGFkKTtcbiAgICBpZiAoICFydW5uaW5nICkge1xuICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocG9sbEdhbWVwYWRzKTtcbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdnYW1lcGFkZGlzY29ubmVjdGVkJywgZSA9PiB7XG4gICAgLy8gUmVtb3ZlIHVuYW5ub3VuY2VkIGdhbWVwYWRzIGZyb20gb3VyIGxpc3QgaWYgdGhleSBsZWF2ZVxuICAgIGlmICggdW5hbm5vdW5jZWRHYW1lcGFkcy5pbmNsdWRlcyhlLmdhbWVwYWQuaW5kZXgpIClcbiAgICAgIHVuYW5ub3VuY2VkR2FtZXBhZHMgPSB1bmFubm91bmNlZEdhbWVwYWRzLmZpbHRlcihnID0+IGcgIT0gZS5nYW1lcGFkLmluZGV4KTtcbiAgICAvLyBJZ25vcmUgY29udHJvbGxlcnMgdGhhdCBhcmUgbm90IGluIG91ciBtYWluIGxpc3RcbiAgICBpZiAoICFnYW1lcGFkc1tlLmdhbWVwYWQuaW5kZXhdIClcbiAgICAgIHJldHVybjtcblxuICAgIG5vdGlmeShg8J+OriBHYW1lcGFkIFwiJHtlLmdhbWVwYWQuaWR9XCIgZGlzY29ubmVjdGVkYCk7XG4gICAgZGVsZXRlIGdhbWVwYWRzW2UuZ2FtZXBhZC5pbmRleF07XG4gICAgaWYgKCBPYmplY3Qua2V5cyhnYW1lcGFkcykubGVuZ3RoID09IDAgKSBydW5uaW5nID0gZmFsc2U7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHBvbGxHYW1lcGFkcygpIHtcbiAgICBpZiAoICFydW5uaW5nICkgcmV0dXJuO1xuXG4gICAgY29uc3QgY3VycmVudEdhbWVwYWRzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XG4gICAgaWYgKCAhY3VycmVudEdhbWVwYWRzICkgcmV0dXJuO1xuXG4gICAgZm9yICggY29uc3QgZ2FtZXBhZCBvZiBjdXJyZW50R2FtZXBhZHMgKSB7XG4gICAgICAvLyBEb24ndCB1c2Ugbm9uLWV4aXN0YW50IGdhbWVwYWRzIChsb29raW5nIGF0IHlvdSwgQ2hyb21lKVxuICAgICAgaWYgKCAhZ2FtZXBhZCApIGNvbnRpbnVlO1xuXG4gICAgICAvLyBPbmx5IHVzZSBnYW1lcGFkcyB0aGF0IHdlIGdvdCBhIHZhbGlkIGNvbm5lY3QgZXZlbnQgZm9yXG4gICAgICBpZiAoICFnYW1lcGFkc1tnYW1lcGFkLmluZGV4XSApIHtcbiAgICAgICAgaWYgKCAhdW5hbm5vdW5jZWRHYW1lcGFkcy5pbmNsdWRlcyhnYW1lcGFkLmluZGV4KSApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJHb3QgYW4gdW5hbm5vdW5jZWQgZ2FtZXBhZDpcIiwgZ2FtZXBhZCk7XG4gICAgICAgICAgdW5hbm5vdW5jZWRHYW1lcGFkcy5wdXNoKGdhbWVwYWQuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhbnkgb2YgdGhlICh1c2VmdWwpIGJ1dHRvbnMgY2hhbmdlIHN0YXRlIG9uIGFueSBvZiB0aGUgZ2FtZXBhZHMsXG4gICAgICAvLyBsZXQgU2lsaWNvbjgga25vdy5cbiAgICAgIGZvciAoIGNvbnN0IGtleSBpbiBrZXlzICkge1xuICAgICAgICBpZiAoIGdhbWVwYWQuYnV0dG9uc1trZXldLnByZXNzZWQgIT0gZ2FtZXBhZHNbZ2FtZXBhZC5pbmRleF1ba2V5XSApIHtcbiAgICAgICAgICBpZiAoIGdhbWVwYWQuYnV0dG9uc1trZXldLnByZXNzZWQgKVxuICAgICAgICAgICAgaW5zdGFuY2UucHJlc3NLZXkoa2V5c1trZXldKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBpbnN0YW5jZS5yZWxlYXNlS2V5KGtleXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2F2ZSBuZXcgc3RhdGUgZm9yIG5leHQgbG9vcFxuICAgICAgc2F2ZVN0YXRlKGdhbWVwYWQpO1xuICAgIH1cblxuICAgIC8vIEtlZXAgcG9sbGluZ1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwb2xsR2FtZXBhZHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZVN0YXRlKGdhbWVwYWQpIHtcbiAgICBnYW1lcGFkc1tnYW1lcGFkLmluZGV4XSA9XG4gICAgICBPYmplY3Qua2V5cyhrZXlzKVxuICAgICAgICAgICAgLm1hcChrZXkgPT4gW2tleSwgZ2FtZXBhZC5idXR0b25zW2tleV0ucHJlc3NlZF0pXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIHZhbHVlKSA9PiAoYWNjW3ZhbHVlWzBdXSA9IHZhbHVlWzFdLCBhY2MpLCB7fSk7XG4gIH1cblxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gXCJcXHUwMDAww6BhXFx1MDAwMWJcXHUwMDAxY1xcdTAwMDDCoizDs1xcdTAwMWXDsGVAXFx1MDAwMFxcdTAwMTIqQMO/XFx1MDAxMlxcXCJcXFwie8OwZcORJcKBXFx1MDAwNHNcXHUwMDAxXFx1MDAxMlxcYmFcXHUwMDAxclxcdTAwMDZzXFx1MDAwMVxcdTAwMTJcXGJcXHUwMDEyKiAgIFdlbGNvbWXDvyAgICAgICB0byBTaWxpY29uLTghw79DbGljayB0aGUgc2NyZWVuw79vciBkcmFnIGEgKi5jaDjDv2ZpbGUgaGVyZSBeX15cXHUwMDAwZH/CgEJkIMKARcKiwo/CgFxcdTAwMGXDsFxcdTAwMWXDsFxcdTAwMWXDsFxcdTAwMWVcXHUwMDAww65cXHUwMDAyXFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDAywoDCgMKAXFx1MDAwMMKAXFx1MDAwNMKgwqBcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDA2UMO4UMO4UFxcdTAwMDZ4wqBwKMOwXFx1MDAwNMKgIEDCgMKgXFx1MDAwNUDCoEDCoHBcXHUwMDAywoDCgFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDNAwoDCgMKAQFxcdTAwMDPCgEBAQMKAXFx1MDAwNiDCqHDCqCBcXHUwMDA0XFx1MDAwMEDDoEBcXHUwMDAwXFx1MDAwM1xcdTAwMDBcXHUwMDAwXFx1MDAwMEDCgFxcdTAwMDRcXHUwMDAwXFx1MDAwMMOgXFx1MDAwMFxcdTAwMDBcXHUwMDAyXFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwMMKAXFx1MDAwNCAgQMKAwoBcXHUwMDA1YMKQwpDCkGBcXHUwMDA0QMOAQEDDoFxcdTAwMDXDoFxcdTAwMTBgwoDDsFxcdTAwMDXDoFxcdTAwMTBgXFx1MDAxMMOgXFx1MDAwNcKAwpDDsFxcdTAwMTBcXHUwMDEwXFx1MDAwNcOwwoDDoFxcdTAwMTDDoFxcdTAwMDVgwoDDoMKQYFxcdTAwMDXDsFxcdTAwMTAgQEBcXHUwMDA1YMKQYMKQYFxcdTAwMDVgwpBwXFx1MDAxMGBcXHUwMDAyXFx1MDAwMMKAXFx1MDAwMMKAXFx1MDAwMFxcdTAwMDNcXHUwMDAwQFxcdTAwMDBAwoBcXHUwMDA0IEDCgEAgXFx1MDAwNFxcdTAwMDDDoFxcdTAwMDDDoFxcdTAwMDBcXHUwMDA0woBAIEDCgFxcdTAwMDTDgCBAXFx1MDAwMEBcXHUwMDA1YMKQwrDCgGBcXHUwMDA1YMKQw7DCkMKQXFx1MDAwNcOgwpDDoMKQw6BcXHUwMDA1cMKAwoDCgHBcXHUwMDA1w6DCkMKQwpDDoFxcdTAwMDTDoMKAw6DCgMOgXFx1MDAwNMOgwoDDgMKAwoBcXHUwMDA1cMKAwrDCkGBcXHUwMDA1wpDCkMOwwpDCkFxcdTAwMDTDoEBAQMOgXFx1MDAwNMOgICAgw4BcXHUwMDA1wpDCoMOAwqDCkFxcdTAwMDTCgMKAwoDCgMOgXFx1MDAwNsKIw5jCqMKIwohcXHUwMDA1wpDDkMOwwrDCkFxcdTAwMDVgwpDCkMKQYFxcdTAwMDXDoMKQw6DCgMKAXFx1MDAwNWDCkMKQwrBwXFx1MDAwNcOgwpDDoMKQwpBcXHUwMDA1cMKAYFxcdTAwMTDDoFxcdTAwMDbDuCAgICBcXHUwMDA1wpDCkMKQwpBgXFx1MDAwNcKQwpDCkGBgXFx1MDAwNsKIwojCqMOYwohcXHUwMDA2wohQIFDCiFxcdTAwMDbCiFAgICBcXHUwMDA0w6AgQMKAw6BcXHUwMDAzw4DCgMKAwoDDgFxcdTAwMDTCgMKAQCAgXFx1MDAwM8OAQEBAw4BcXHUwMDA0QMKgXFx1MDAwMFxcdTAwMDBcXHUwMDAwXFx1MDAwNFxcdTAwMDBcXHUwMDAwXFx1MDAwMFxcdTAwMDDDoFxcdTAwMDPCgEBcXHUwMDAwXFx1MDAwMFxcdTAwMDBcXHUwMDA0XFx1MDAwMGDCoMKgYFxcdTAwMDTCgMKAw4DCoMOAXFx1MDAwNFxcdTAwMDBgwoDCgGBcXHUwMDA0ICBgwqBgXFx1MDAwNFxcdTAwMDBAwqDDgGBcXHUwMDAzQMKAw4DCgMKAXFx1MDAwNFxcdTAwMDBgwqBgw4BcXHUwMDA0woDCgMOAwqDCoFxcdTAwMDLCgFxcdTAwMDDCgMKAwoBcXHUwMDAzQFxcdTAwMDBAQMKAXFx1MDAwNMKAwoDCoMOAwqBcXHUwMDAzw4BAQEBAXFx1MDAwNFxcdTAwMDDCoMOgwqDCoFxcdTAwMDRcXHUwMDAww4DCoMKgwqBcXHUwMDA0XFx1MDAwMEDCoMKgQFxcdTAwMDRcXHUwMDAww4DCoMOAwoBcXHUwMDA0XFx1MDAwMGDCoGAgXFx1MDAwNFxcdTAwMDDCoMOAwoDCgFxcdTAwMDNcXHUwMDAwQMKAQMKAXFx1MDAwM8KAwoDDgMKAQFxcdTAwMDRcXHUwMDAwwqDCoMKgQFxcdTAwMDRcXHUwMDAwwqDCoEBAXFx1MDAwNFxcdTAwMDDCoMKgw6DCoFxcdTAwMDRcXHUwMDAwwqBAQMKgXFx1MDAwNFxcdTAwMDDCoMKgQMKAXFx1MDAwM1xcdTAwMDDDgEDCgMOAXFx1MDAwNGBAwoBAYFxcdTAwMDLCgMKAwoDCgMKAXFx1MDAwNMOAQCBAw4BcXHUwMDA1XFx1MDAwMFDCoFxcdTAwMDBcXHUwMDAwXCIiLCJtb2R1bGUuZXhwb3J0cyA9IG1lc3NhZ2UgPT4ge1xuICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9uJyk7XG4gIG5vdGlmaWNhdGlvbi5pbm5lclRleHQgPSBtZXNzYWdlO1xuICBub3RpZmljYXRpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIHNldFRpbWVvdXQoKCkgPT4gbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpLCA1MDAwKTtcbn1cbiIsImNvbnN0IGNhbnZhcyAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheScpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVuZGVyOiAod2lkdGgsIGhlaWdodCwgYnl0ZXMpID0+IHtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGhlaWdodCAqIHdpZHRoOyBpKysgKSB7XG4gICAgICBjb25zdCBkaXNwbGF5T2Zmc2V0ICA9IGkgKiA0O1xuICAgICAgY29uc3Qgc2lsaWNvbjhPZmZzZXQgPSBpICogMztcbiAgICAgIGltYWdlRGF0YS5kYXRhW2Rpc3BsYXlPZmZzZXQrMF0gPSBieXRlc1tzaWxpY29uOE9mZnNldCswXTtcbiAgICAgIGltYWdlRGF0YS5kYXRhW2Rpc3BsYXlPZmZzZXQrMV0gPSBieXRlc1tzaWxpY29uOE9mZnNldCsxXTtcbiAgICAgIGltYWdlRGF0YS5kYXRhW2Rpc3BsYXlPZmZzZXQrMl0gPSBieXRlc1tzaWxpY29uOE9mZnNldCsyXTtcbiAgICAgIGltYWdlRGF0YS5kYXRhW2Rpc3BsYXlPZmZzZXQrM10gPSAweEZGO1xuICAgIH1cbiAgICBjb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICB9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBpbnN0YW5jZSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzJyk7XG4gIGxldCBwcm9ncmFtO1xuXG4gIHNldHRpbmdzLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG4gICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHR5cGUgPSBzZXR0aW5ncy5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiaW50ZXJwcmV0ZXJcIl06Y2hlY2tlZCcpLnZhbHVlO1xuICAgIGNvbnN0IHNwZWVkID0gc2V0dGluZ3MucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9XCJzcGVlZFwiXScpLnZhbHVlO1xuICAgIGluc3RhbmNlLmxvYWRQcm9ncmFtKHR5cGUsIHByb2dyYW0pO1xuICAgIGluc3RhbmNlLnNldEN5Y2xlc1BlckZyYW1lKHNwZWVkKTtcbiAgICBzZXR0aW5ncy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICBpbnN0YW5jZS5zdGFydCgpO1xuICB9KTtcblxuICByZXR1cm4gcHJnbSA9PiB7XG4gICAgcHJvZ3JhbSA9IHByZ207XG4gICAgc2V0dGluZ3MuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cbn1cbiIsIi8vIFRoaXMgaXMganVzdCBhIHdyYXBwZXIgZm9yIGFsbCB0aGUgV2ViQXNzZW1ibHkgc3R1ZmYuXG5cbi8vIHJlcXVpcmUoJy4vd2FzbV9leGVjLmpzJyk7XG5jb25zdCBnbyA9IG5ldyBHbygpO1xuXG5pZiAoIVdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKSB7IC8vIHBvbHlmaWxsXG4gIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID0gYXN5bmMgKHJlc3AsIGltcG9ydE9iamVjdCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IChhd2FpdCByZXNwKS5hcnJheUJ1ZmZlcigpO1xuICAgIHJldHVybiBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShzb3VyY2UsIGltcG9ydE9iamVjdCk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2xhc3Mge1xuXG4gIGNvbnN0cnVjdG9yKHtwbGF5U291bmQsIHN0b3BTb3VuZCwgZGlzcGxheX0pIHtcbiAgICBwbGF5U291bmQgfHw9ICgpID0+IHt9O1xuICAgIHN0b3BTb3VuZCB8fD0gKCkgPT4ge307XG4gICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3N0b3BTb3VuZCA9IHN0b3BTb3VuZDtcblxuICAgIE9iamVjdC5hc3NpZ24oZ28uaW1wb3J0T2JqZWN0LmVudiwge1xuICAgICAgJ21haW4ucmFuZG9tQnl0ZSc6ICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikgJiAweEZGLFxuICAgICAgJ21haW4ucGxheVNvdW5kJzogIChwbGF5aW5nUGF0dGVybiwgcGF0dGVybiwgcGl0Y2gpID0+IHtcbiAgICAgICAgcGF0dGVybiA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2NwdS5tZW1vcnkuYnVmZmVyLCBwYXR0ZXJuLCAxNik7XG4gICAgICAgIHBsYXlTb3VuZChwbGF5aW5nUGF0dGVybiwgcGF0dGVybiwgcGl0Y2gpO1xuICAgICAgfSxcbiAgICAgICdtYWluLnN0b3BTb3VuZCc6ICBzdG9wU291bmQsXG4gICAgICAnbWFpbi5yZW5kZXInOiAod2lkdGgsIGhlaWdodCwgZGF0YVB0cikgPT4ge1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2NwdS5tZW1vcnkuYnVmZmVyLCBkYXRhUHRyLCB3aWR0aCAqIGhlaWdodCAqIDMpO1xuICAgICAgICBkaXNwbGF5LnJlbmRlcih3aWR0aCwgaGVpZ2h0LCBieXRlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHJldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhmZXRjaChcInNpbGljb244Lndhc21cIiksIGdvLmltcG9ydE9iamVjdClcbiAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgdGhpcy5fY3B1ID0gcmVzdWx0Lmluc3RhbmNlLmV4cG9ydHM7XG4gICAgICBnby5ydW4ocmVzdWx0Lmluc3RhbmNlKTtcbiAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fcnVubmluZylcbiAgICAgICAgICB0aGlzLl9jcHUuY2xvY2tUaWNrKClcbiAgICAgIH0sIDEwMDAgLyA2MCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0Q3ljbGVzUGVyRnJhbWUobmV3Q3ljbGVzKSB7XG4gICAgdGhpcy5fY3B1LnNldEN5Y2xlc1BlckZyYW1lKG5ld0N5Y2xlcyk7XG4gIH1cblxuICBsb2FkUHJvZ3JhbSh0eXBlLCBwcm9ncmFtKSB7XG4gICAgdGhpcy5fY3B1LnJlc2V0KHR5cGUpO1xuICAgIGNvbnN0IHJhbSA9IG5ldyBVaW50OEFycmF5KHRoaXMuX2NwdS5tZW1vcnkuYnVmZmVyLCB0aGlzLl9jcHUucmFtUHRyKCksIHRoaXMuX2NwdS5yYW1TaXplKCkpO1xuICAgIC8vIExvYWQgcHJvZ3JhbSBpbnRvIFJBTVxuICAgIGZvciAoIGxldCBpID0gMHgyMDA7IGkgPCAweDIwMCArIHByb2dyYW0ubGVuZ3RoOyBpKysgKSByYW1baV0gPSBwcm9ncmFtW2kgLSAweDIwMF07XG4gIH1cblxuICBkdW1wU3RhdHVzKCkge1xuICAgIHRoaXMuX2NwdS5kdW1wU3RhdHVzKCk7XG4gIH1cblxuICBwcmVzc0tleShrZXkpIHtcbiAgICB0aGlzLl9jcHUucHJlc3NLZXkoa2V5KTtcbiAgfVxuXG4gIHJlbGVhc2VLZXkoa2V5KSB7XG4gICAgdGhpcy5fY3B1LnJlbGVhc2VLZXkoa2V5KTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuX3J1bm5pbmcgPSB0cnVlO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLl9zdG9wU291bmQoKTtcbiAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gIH1cblxufVxuIiwibGV0IGN5Y2xlc1BlckZyYW1lID0gMzA7XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFuY2UgPT4ge1xuICBjb25zdCBrZXlzID0ge1xuICAgIC8vIEFycm93IGtleXNcbiAgICAzODogNSwgXHRcdC8vIHVwXG4gICAgMzc6IDcsIFx0XHQvLyBsZWZ0XG4gICAgMzk6IDksIFx0XHQvLyByaWdodFxuICAgIDQwOiA4LCBcdFx0Ly8gZG93blxuXG4gICAgLy8gMTYga2V5IHBhZFxuICAgIDQ5OiAxLFx0XHQvLyAxXG4gICAgNTA6IDIsXHRcdC8vIDJcbiAgICA1MTogMyxcdFx0Ly8gM1xuICAgIDUyOiAweEMsXHQvLyA0XG4gICAgODE6IDQsIFx0XHQvLyBRXG4gICAgODc6IDUsIFx0XHQvLyBXXG4gICAgNjk6IDYsIFx0XHQvLyBFXG4gICAgODI6IDB4RCwgXHQvLyBSXG4gICAgNjU6IDcsIFx0XHQvLyBBXG4gICAgODM6IDgsIFx0XHQvLyBTXG4gICAgNjg6IDksIFx0XHQvLyBEXG4gICAgNzA6IDB4RSwgXHQvLyBGXG4gICAgOTA6IDB4QSwgXHQvLyBaXG4gICAgODg6IDAsIFx0XHQvLyBYXG4gICAgNjc6IDB4QiwgXHQvLyBDXG4gICAgODY6IDB4RiwgXHQvLyBWXG5cbiAgICAvLyBPdGhlciBudW1iZXIga2V5c1xuICAgIDQ4OiAwLFxuICAgIDUzOiA1LFxuICAgIDU0OiA2LFxuICAgIDU1OiA3LFxuICAgIDU2OiA4LFxuICAgIDU3OiA5LFxuXG4gICAgLy8gU3BlY2lhbCBrZXlzXG4gICAgMzI6IDYsICAgICAvLyBTcGFjZSBiYXJcbiAgICAxNjogNCwgICAgIC8vIFNoaWZ0XG4gICAgMTc6IDYsICAgICAvLyBDb250cm9sXG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcbiAgICBpZiAoICFpbnN0YW5jZSApIHJldHVybjtcbiAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICBjYXNlIDEzOiAgLy8gRW50ZXJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmR1bXBTdGF0dXMoKTtcbiAgICAgIGNhc2UgMTg3OiAvLyArXG4gICAgICAgIGN5Y2xlc1BlckZyYW1lICo9IDI7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZS5zZXRDeWNsZXNQZXJGcmFtZShjeWNsZXNQZXJGcmFtZSk7XG4gICAgICBjYXNlIDE4OTogLy8gLVxuICAgICAgICBjeWNsZXNQZXJGcmFtZSAvPSAyO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2Uuc2V0Q3ljbGVzUGVyRnJhbWUoY3ljbGVzUGVyRnJhbWUpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKCBpbnN0YW5jZSAmJiBPYmplY3Qua2V5cyhrZXlzKS5pbmNsdWRlcyhlLmtleUNvZGUudG9TdHJpbmcoKSkgKVxuICAgICAgICAgIGluc3RhbmNlLnByZXNzS2V5KGtleXNbZS5rZXlDb2RlXSk7XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IHtcbiAgICBpZiAoIGluc3RhbmNlICYmIE9iamVjdC5rZXlzKGtleXMpLmluY2x1ZGVzKGUua2V5Q29kZS50b1N0cmluZygpKSApXG4gICAgICBpbnN0YW5jZS5yZWxlYXNlS2V5KGtleXNbZS5rZXlDb2RlXSk7XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5rZXlib2FyZCBidXR0b24nKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoKSA9PiB7XG4gICAgICBpbnN0YW5jZS5wcmVzc0tleShidXR0b24uZGF0YXNldC52YWx1ZSk7XG4gICAgfSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcbiAgICAgIGluc3RhbmNlLnJlbGVhc2VLZXkoYnV0dG9uLmRhdGFzZXQudmFsdWUpO1xuICAgIH0sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgfSk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBsYXlTb3VuZDogKHBsYXlpbmdQYXR0ZXJuLCBwYXR0ZXJuLCBwaXRjaCkgPT4ge1xuICAgIGlmICggcGxheWluZ1BhdHRlcm4gKSB7XG4gICAgICAvLyBQbGF5IFhPLUNoaXAgYHBhdHRlcm5gIGF0IGBwaXRjaGBcbiAgICAgIEJsZWVwcy5pbnN0YW5jZSgpLnNldFRvU291bmQocGF0dGVybiwgcGl0Y2gpO1xuICAgICAgQmxlZXBzLmluc3RhbmNlKCkuc2V0Vm9sdW1lKDAuMDAwMyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFBsYXkgYSByZWd1bGFyIG9sZCBDSElQLTggXCJiZWVwXCJcbiAgICAgIEJsZWVwcy5pbnN0YW5jZSgpLnNldFRvQmxlZXAoKTtcbiAgICAgIEJsZWVwcy5pbnN0YW5jZSgpLnNldFZvbHVtZSgwLjEpO1xuICAgIH1cbiAgfSxcbiAgc3RvcFNvdW5kOiAoKSA9PiB7XG4gICAgQmxlZXBzLmluc3RhbmNlKCkuc2V0Vm9sdW1lKDApO1xuICB9XG59O1xuXG5jbGFzcyBCbGVlcHMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9hdWRpb0N0eCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8IHdpbmRvdy5hdWRpb0NvbnRleHQpO1xuXG4gICAgdGhpcy5fb3NjaWxsYXRvciA9IHRoaXMuX2F1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgICB0aGlzLl9nYWluTm9kZSA9IHRoaXMuX2F1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcbiAgICB0aGlzLl9vc2NpbGxhdG9yLmNvbm5lY3QodGhpcy5fZ2Fpbk5vZGUpO1xuICAgIHRoaXMuX2dhaW5Ob2RlLmNvbm5lY3QodGhpcy5fYXVkaW9DdHguZGVzdGluYXRpb24pO1xuXG4gICAgdGhpcy5zZXRWb2x1bWUoMCk7XG4gICAgdGhpcy5fb3NjaWxsYXRvci5zdGFydCgpO1xuICB9XG5cbiAgc2V0Vm9sdW1lKGdhaW4pIHtcbiAgICB0aGlzLl9nYWluTm9kZS5nYWluLnZhbHVlID0gZ2FpbjtcbiAgfVxuXG4gIHNldFRvQmxlZXAoKSB7XG4gICAgdGhpcy5fb3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSA2MDA7XG4gICAgdGhpcy5fb3NjaWxsYXRvci50eXBlID0gJ3RyaWFuZ2xlJztcbiAgfVxuXG4gIHNldFRvU291bmQocGF0dGVybiwgcGl0Y2gpIHtcbiAgICAvLyBIb25lc3RseSwgSSBoYWQgbm8gaWRlYSBob3cgdG8gZ28gZnJvbSBhIHBhdHRlcm4gYW5kIGEgcGl0Y2ggdG8gc29tZVxuICAgIC8vIHNvdW5kIGluIHRoZSBicm93c2VyLiBMdWNraWx5IEtvdXplcnUgcmVhY2hlZCBvdXQgYW5kIGhlbHBlZCBtZSBieVxuICAgIC8vIHN1cHBseWluZyB0aGUgRkZUIG1hZ2ljIGF0IHRoZSBib3R0b20gb2YgdGhpcyBjbGFzcyEgVGhhbmtzIHNvIG11Y2ghXG4gICAgdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUoXG4gICAgICB0aGlzLl9wZXJpb2RpY1dhdmUodGhpcy5fcGF0dGVyblRvQml0cyhwYXR0ZXJuKSlcbiAgICApO1xuICAgIC8vIDEyOCBpcyBhIG1hZ2ljIG51bWJlciDwn6qELCBkaXNjb3ZlcmVkIGJ5IHRyaWFsIGFuZCBlcnJvciwgY29tcGFyaW5nIHRoZVxuICAgIC8vIHNvdW5kIHRvIE9jdG8gYW5kIGEgbGl0dGxlIGVkdWNhdGVkIGd1ZXNzd29yay4gSXQgbWF0Y2hlcyB0aGUgbnVtYmVyIG9mXG4gICAgLy8gb25lLWJpdCBzYW1wbGVzIGluIDE2IGJ5dGVzLCB3aGljaCBpcyB3aHkgd2UgdGhpbmsgaXQncyBjb3JyZWN0LlxuICAgIHRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gcGl0Y2ggLyAxMjg7XG4gIH1cblxuICAvLyBFeHRlbmQgdGhlIHBhdHRlcm4gdG8gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBiaXRzLCBxdWFkcnVwbGluZyBlYWNoIGJpdCB0b1xuICAvLyBnZXQgYSBuaWNlciBzcXVhcmUgd2F2ZVxuICBfcGF0dGVyblRvQml0cyhwYXR0ZXJuKSB7XG4gICAgY29uc3QgYml0cyA9IG5ldyBGbG9hdDMyQXJyYXkoNTEyKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICggY29uc3QgYnl0ZSBvZiBwYXR0ZXJuICkge1xuICAgICAgbGV0IG1hc2sgPSAxMjg7XG4gICAgICB3aGlsZSAoIG1hc2sgIT0gMCApIHtcbiAgICAgICAgY29uc3QgdmFsID0gKGJ5dGUgJiBtYXNrKSAhPSAwID8gMSA6IDA7XG4gICAgICAgIGJpdHNbaSsrXSA9IHZhbDtcbiAgICAgICAgYml0c1tpKytdID0gdmFsO1xuICAgICAgICBiaXRzW2krK10gPSB2YWw7XG4gICAgICAgIGJpdHNbaSsrXSA9IHZhbDtcbiAgICAgICAgbWFzayA+Pj0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJpdHM7XG4gIH1cblxuICAvLyBDb252ZXJ0IHRoZSBiaXQgcGF0dGVybiB0byBhIHdhdmUgdGhhdCBtYWtlcyBzZW5zZSB0byB0aGUgb3NjaWxsYXRvclxuICBfcGVyaW9kaWNXYXZlKHNhbXBsZXNSKSB7XG4gICAgdmFyIHNhbXBsZXNJID0gbmV3IEZsb2F0MzJBcnJheShzYW1wbGVzUi5sZW5ndGgpO1xuICAgIHZhciBGRlRyZXN1bHQgPSB0aGlzLl9GRlQoc2FtcGxlc1IsIHNhbXBsZXNJKTtcbiAgICByZXR1cm4gdGhpcy5fYXVkaW9DdHguY3JlYXRlUGVyaW9kaWNXYXZlKFxuICAgICAgRkZUcmVzdWx0WzBdLnNsaWNlKDAsRkZUcmVzdWx0WzBdLmxlbmd0aC8yKSxcbiAgICAgIEZGVHJlc3VsdFsxXS5zbGljZSgwLEZGVHJlc3VsdFsxXS5sZW5ndGgvMiksXG4gICAgICB7IGRpc2FibGVOb3JtYWxpemF0aW9uOiB0cnVlIH1cbiAgICApO1xuICB9XG5cbiAgLy8gRmFzdCBGb3VyaWVyIFRyYW5zZm9ybSwgaW1wbGVtZW50ZWQgaW4gSmF2YVNjcmlwdCBieSBLb3V6ZXJ1XG4gIC8vIChodHRwczovL2dpdGh1Yi5jb20vS291emVydSkgYmFzZWQgb24gdGhlIHBzZXVkb2NvZGUgaW5cbiAgLy8gaHR0cHM6Ly95b3V0dS5iZS9oN2FwTzdxMTZWMFxuICBfRkZUKFIsSSkge1xuICAgIHZhciBuID0gUi5sZW5ndGg7XG4gICAgaWYgKG4gPT0gMSkgcmV0dXJuIFtSLEldO1xuICAgIHZhciBXciA9IE1hdGguY29zKDIqTWF0aC5QSS9uKTtcbiAgICB2YXIgV2kgPSBNYXRoLnNpbigyKk1hdGguUEkvbik7XG4gICAgdmFyIFBFciA9IG5ldyBGbG9hdDMyQXJyYXkobi8yKTtcbiAgICB2YXIgUEVpID0gbmV3IEZsb2F0MzJBcnJheShuLzIpO1xuICAgIHZhciBQT3IgPSBuZXcgRmxvYXQzMkFycmF5KG4vMik7XG4gICAgdmFyIFBPaSA9IG5ldyBGbG9hdDMyQXJyYXkobi8yKTtcbiAgICBmb3IgKHZhciB6ID0gMDsgejxuOyB6KyspIHtcbiAgICAgIGlmICh6JjEpIHtcbiAgICAgICAgUE9yW3o+PjFdID0gUlt6XTtcbiAgICAgICAgUE9pW3o+PjFdID0gSVt6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFBFclt6Pj4xXSA9IFJbel07XG4gICAgICAgIFBFaVt6Pj4xXSA9IElbel07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHllID0gdGhpcy5fRkZUKFBFcixQRWkpO1xuICAgIHZhciB5byA9IHRoaXMuX0ZGVChQT3IsUE9pKTtcbiAgICB2YXIgeWVyID0geWVbMF0sIHllaSA9IHllWzFdO1xuICAgIHZhciB5b3IgPSB5b1swXSwgeW9pID0geW9bMV07XG4gICAgdmFyIHlyID0gbmV3IEZsb2F0MzJBcnJheShuKTtcbiAgICB2YXIgeWkgPSBuZXcgRmxvYXQzMkFycmF5KG4pO1xuXG4gICAgZm9yICh2YXIgeiA9IDAsIG0gPSBuLzIsIHAgPSAxLCBxID0gMCwgciA9IDA7IHo8bTsgeisrKSB7XG4gICAgICB2YXIgYSA9IHllclt6XSwgYiA9IHllaVt6XTtcbiAgICAgIHZhciBjID0geW9yW3pdLCBkID0geW9pW3pdO1xuICAgICAgeXJbeiAgXSA9IGEgKyBwKmMgLSBxKmQ7XG4gICAgICB5aVt6ICBdID0gYiArIHAqZCArIHEqYztcbiAgICAgIHlyW3orbV0gPSBhIC0gcCpjICsgcSpkO1xuICAgICAgeWlbeittXSA9IGIgLSBwKmQgLSBxKmM7XG4gICAgICByID0gcCpXciAtIHEqV2k7XG4gICAgICBxID0gcCpXaSArIHEqV3I7XG4gICAgICBwPXI7XG4gICAgfVxuICAgIHJldHVybiBbeXIseWldO1xuICB9XG59XG5cbi8vIFNvdW5kIG1heSBvbmx5IHBsYXkgYWZ0ZXIgYSBcInVzZXIgZ2VzdHVyZVwiLCBzbyB3ZSBjYW4ndCBqdXN0IGNyZWF0ZSBhIHNpbmdsZVxuLy8gaW5zdGFuY2Ugb2YgQmxlZXBzIG9uIHBhZ2UgbG9hZC4gU28gd2UgdXNlIGEgc2luZ2xldG9uIHBhdHRlcm4gaGVyZSBpbnN0ZWFkLFxuLy8gXCJsYXp5IGxvYWRpbmdcIiB0aGUgaW5zdGFuY2UgYXMgbGF0ZSBhcyBwb3NzaWJsZS5cbkJsZWVwcy5pbnN0YW5jZSA9ICgpID0+IHtcbiAgaWYgKCEhQmxlZXBzLl9pbnN0YW5jZSkgcmV0dXJuIEJsZWVwcy5faW5zdGFuY2U7XG4gIHJldHVybiBCbGVlcHMuX2luc3RhbmNlID0gbmV3IEJsZWVwcygpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFVVE86ICAgICAgMCwgLy8gTm90ZSB0aGF0IHRoaXMgb25lIGhhbHRzIGZvciBkaXNwbGF5IHJlZnJlc2gsIHVzZSBCTElORFZJUFxuICBWSVA6ICAgICAgIDEsIC8vIGluc3RlYWQgZm9yIGhlYWRsZXNzIHRlc3RpbmdcbiAgQkxJTkRWSVA6ICAyLFxuICBTQ0hJUDogICAgIDMsXG4gIFhPQ0hJUDogICAgNFxufTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvKlxuICogVGhpcyBjbGFzcyBpbnN0YWxscyBvbmUgc2luZ2xlIGNsaWNrIGhhbmRsZXIgb24gdGhlIHdob2xlIGRvY3VtZW50LCBhbmRcbiAqIGV2YWx1YXRlcyB3aGljaCBjYWxsYmFjayB0byBjYWxsIGF0IGNsaWNrIHRpbWUsIGJhc2VkIG9uIHRoZSBlbGVtZW50IHRoYXQgaGFzXG4gKiBiZWVuIGNsaWNrZWQuIFRoaXMgYWxsb3dzIHVzIHRvIHN3YXAgb3V0IGFuZCByZXJlbmRlciB3aG9sZSBzZWN0aW9ucyBvZiB0aGVcbiAqIERPTSB3aXRob3V0IGhhdmluZyB0byByZWluc3RhbGwgYSBidW5jaCBvZiBjbGljayBoYW5kbGVycyBlYWNoIHRpbWUuIFRoaXNcbiAqIG5pY2VseSBkZWNvdXBsZXMgdGhlIHJlbmRlciBsb2dpYyBmcm9tIHRoZSBjbGljayBldmVudCBtYW5hZ2VtZW50IGxvZ2ljLlxuICpcbiAqIFRvIG1ha2Ugc3VyZSB3ZSByZWFsbHkgb25seSBpbnN0YWxsIGEgc2luZ2xlIGNsaWNrIGhhbmRsZXIsIHlvdSBjYW4gdXNlIHRoZVxuICogc2luZ2xldG9uIHBhdHRlcm4gYW5kIGFzayBmb3IgYENsaWNrLmluc3RhbmNlKClgIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXdcbiAqIG9iamVjdC5cbiAqL1xuXG5jbGFzcyBDbGljayB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSB7fTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgICAgIChlKSA9PiB0aGlzLl9jYWxsSGFuZGxlcignY2xpY2snLCAgICAgZSkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB0aGlzLl9jYWxsSGFuZGxlcignbW91c2Vkb3duJywgZSkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAgIChlKSA9PiB0aGlzLl9jYWxsSGFuZGxlcignbW91c2V1cCcsICAgZSkpO1xuICB9XG5cbiAgcmVnaXN0ZXIoc2VsZWN0b3IsIGhhbmRsZXJzID0ge2NsaWNrOiBudWxsLCBtb3VzZWRvd246IG51bGwsIG1vdXNldXA6IG51bGx9KSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVycyA9PSAnZnVuY3Rpb24nKSBoYW5kbGVycyA9IHsgY2xpY2s6IGhhbmRsZXJzIH07XG4gICAgdGhpcy5faGFuZGxlcnNbc2VsZWN0b3JdID0gdGhpcy5faGFuZGxlcnNbc2VsZWN0b3JdIHx8IFtdO1xuICAgIHRoaXMuX2hhbmRsZXJzW3NlbGVjdG9yXS5wdXNoKGhhbmRsZXJzKTtcbiAgfVxuXG4gIF9jYWxsSGFuZGxlcih0eXBlLCBlKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5faGFuZGxlcnMpLmZvckVhY2goKHNlbGVjdG9yKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdChzZWxlY3RvcikgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9oYW5kbGVyc1tzZWxlY3Rvcl0ubWFwKChoKSA9PiBoW3R5cGVdKTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PSAnZnVuY3Rpb24nICYmICFlLmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgICAgICBoYW5kbGVyKGUsIHNlbGVjdG9yKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59XG5cbkNsaWNrLmluc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gIGlmICghIUNsaWNrLl9pbnN0YW5jZSkgcmV0dXJuIENsaWNrLl9pbnN0YW5jZTtcbiAgcmV0dXJuIENsaWNrLl9pbnN0YW5jZSA9IG5ldyBDbGljaygpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDbGljaztcbiIsIi8qXG4gKiBUaGlzIGNsYXNzIGluc3RhbGxzIHNpbmdsZSBkcmFnIGV2ZW50IGhhbmRsZXJzIG9uIHRoZSB3aG9sZSBkb2N1bWVudCwgYW5kXG4gKiBldmFsdWF0ZXMgd2hpY2ggZWxlbWVudCB0aGV5IGluZmx1ZW5jZSBhdCBkcmFnIHRpbWUuIElmIHlvdSBkcm9wIGEgZmlsZSB0aGVcbiAqIHJlbGV2YW50IGNhbGxiYWNrIGdldHMgY2FsbGVkLCBiYXNlZCBvbiB0aGUgZWxlbWVudCB0aGF0IHRoZSBmaWxlIHdhcyBkcm9wcGVkXG4gKiBvbi4gVGhpcyBhbGxvd3MgdXMgdG8gc3dhcCBvdXQgYW5kIHJlcmVuZGVyIHdob2xlIHNlY3Rpb25zIG9mIHRoZSBET00gd2l0aG91dFxuICogaGF2aW5nIHRvIHJlaW5zdGFsbCBhIGJ1bmNoIG9mIGV2ZW50IGhhbmRsZXJzIGVhY2ggdGltZS4gVGhpcyBuaWNlbHlcbiAqIGRlY291cGxlcyB0aGUgcmVuZGVyIGxvZ2ljIGZyb20gdGhlIGRyYWcgZXZlbnQgbWFuYWdlbWVudCBsb2dpYy5cbiAqXG4gKiBUbyBtYWtlIHN1cmUgd2UgcmVhbGx5IG9ubHkgaW5zdGFsbCBzaW5nbGUgaGFuZGxlcnMsIHlvdSBjYW4gdXNlIHRoZVxuICogc2luZ2xldG9uIHBhdHRlcm4gYW5kIGFzayBmb3IgYEZpbGVUYXJnZXQuaW5zdGFuY2UoKWAgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ld1xuICogb2JqZWN0LlxuICovXG5cbmltcG9ydCBDbGljayBmcm9tICcuL2NsaWNrJztcblxuY2xhc3MgRmlsZVRhcmdldCB7XG5cbiAgY29uc3RydWN0b3IoZHJhZ0NsYXNzID0gJ2RyYWdnaW5nJykge1xuICAgIHRoaXMuX2RyYWdDbGFzcyA9IGRyYWdDbGFzcztcbiAgICB0aGlzLl9oYW5kbGVycyAgPSB7fTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgIChlKSA9PiB0aGlzLl9kcmFnT3ZlcihlKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGUpID0+IHRoaXMuX2RyYWdMZWF2ZShlKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsICAgICAgKGUpID0+IHRoaXMuX2Ryb3AoZSkpO1xuICB9XG5cbiAgcmVnaXN0ZXIoc2VsZWN0b3IsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5faGFuZGxlcnNbc2VsZWN0b3JdID0gY2FsbGJhY2s7XG4gICAgQ2xpY2suaW5zdGFuY2UoKS5yZWdpc3RlcihzZWxlY3RvciwgKGUsIHMpID0+IHRoaXMuX29wZW5GaWxlRGlhbG9nKGUsIHMpKTtcbiAgfVxuXG4gIF9kcmFnT3ZlcihlKSB7XG4gICAgaWYgKCF0aGlzLl9pc0Ryb3BUYXJnZXQoZS50YXJnZXQpKSByZXR1cm47XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RyYWdDbGFzcyk7XG4gIH1cblxuICBfZHJhZ0xlYXZlKGUpIHtcbiAgICBpZiAoIXRoaXMuX2lzRHJvcFRhcmdldChlLnRhcmdldCkpIHJldHVybjtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RyYWdDbGFzcyk7XG4gIH1cblxuICBfZHJvcChlKSB7XG4gICAgbGV0IHNlbGVjdG9yID0gdGhpcy5faXNEcm9wVGFyZ2V0KGUudGFyZ2V0KTtcbiAgICBpZiAoIXNlbGVjdG9yKSByZXR1cm47XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kcmFnQ2xhc3MpO1xuICAgIHRoaXMuX2hhbmRsZUZpbGUoc2VsZWN0b3IsIGUsIGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTtcbiAgfVxuXG4gIF9pc0Ryb3BUYXJnZXQodGFyZ2V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2hhbmRsZXJzKS5maW5kKChzZWxlY3RvcikgPT4ge1xuICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KHNlbGVjdG9yKSkgcmV0dXJuIHNlbGVjdG9yO1xuICAgIH0pIHx8IGZhbHNlO1xuICB9XG5cbiAgX29wZW5GaWxlRGlhbG9nKGUsIHNlbGVjdG9yKSB7XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0LnR5cGUgID0gJ2ZpbGUnO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChjKSA9PlxuICAgICAgdGhpcy5faGFuZGxlRmlsZShzZWxlY3RvciwgZSwgYy50YXJnZXQuZmlsZXNbMF0pXG4gICAgKTtcbiAgICBpbnB1dC5jbGljaygpO1xuICB9XG5cbiAgX2hhbmRsZUZpbGUoc2VsZWN0b3IsIGUsIGZpbGUpIHtcbiAgICB0aGlzLl9yZWFkRmlsZShmaWxlKVxuICAgICAgICAudGhlbigocikgPT4gdGhpcy5faGFuZGxlcnNbc2VsZWN0b3JdKGZpbGUsIHIsIGUpKTtcbiAgfVxuXG4gIF9yZWFkRmlsZShmaWxlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoZSkgPT4gcmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpKTtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgIH0pO1xuICB9XG5cbn1cblxuRmlsZVRhcmdldC5pbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoISFGaWxlVGFyZ2V0Ll9pbnN0YW5jZSkgcmV0dXJuIEZpbGVUYXJnZXQuX2luc3RhbmNlO1xuICByZXR1cm4gRmlsZVRhcmdldC5faW5zdGFuY2UgPSBuZXcgRmlsZVRhcmdldCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxlVGFyZ2V0O1xuIiwiLyoqXG4gKiBUaGlzIGlzIGEgdmVyeSBzaW1wbGUgcm91dGluZyBjbGFzcyB0aGF0IGxpc3RlbnMgdG8gbG9jYXRpb24gaGFzaCBjaGFuZ2VzIGFuZFxuICogY2xpY2tzIG9uIGxpbmtzIHRvIHJlZ2lzdGVyZWQgcm91dGVzLlxuICpcbiAqIFlvdSBoYXZlIHRvIGV4cGxpY2l0bHkgZGVmaW5lIHRoZSByb3V0ZXMgdGhhdCB5b3Ugd2lzaCB0byB1c2UsIHNvIHdlIGRvbid0XG4gKiBjbGFzaCAodG9vIG11Y2gpIHdpdGggZGVlcC1saW5raW5nIHRvIG5hbWVkIGFuY2hvcnMgb24geW91ciBwYWdlLiBBbmQgYWxzb1xuICogYmVjYXVzZSBpdCBlbmFibGVzIHlvdSB0byBoYW5kbGUgZGlmZmVyZW50IHJvdXRlcyB3aXRoIGRpZmZlcmVudCBmdW5jdGlvbnMuXG4gKi9cblxuaW1wb3J0IENsaWNrIGZyb20gJy4vY2xpY2snO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb3V0ZXIge1xuXG4gIGNvbnN0cnVjdG9yKHJvdXRlcyA9IGZhbHNlLCBoYW5kbGVyID0gbnVsbCkge1xuICAgIHRoaXMuX3JvdXRlcyA9IFtdO1xuICAgIGlmIChyb3V0ZXMpIHRoaXMuYWRkUm91dGVzKHJvdXRlcywgaGFuZGxlcik7XG4gIH1cblxuICBpbnN0YWxsKCkge1xuICAgIENsaWNrLmluc3RhbmNlKCkucmVnaXN0ZXIoJ2FbaHJlZl0nLCAgKGUpID0+IHRoaXMuX2hhbmRsZUNsaWNrKGUpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIChlKSA9PiB0aGlzLl9oYW5kbGVOYXZpZ2F0aW9uRXZlbnQoZSkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgICAgICAgKGUpID0+IHRoaXMuX2hhbmRsZU5hdmlnYXRpb25FdmVudChlKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhZGRSb3V0ZShyb3V0ZSwgaGFuZGxlcikge1xuICAgIHRoaXMuX3JvdXRlcy5wdXNoKFtyb3V0ZSwgaGFuZGxlcl0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYWRkUm91dGVzKHJvdXRlcywgaGFuZGxlciA9IG51bGwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyb3V0ZXMpKVxuICAgICAgcm91dGVzLmZvckVhY2goKHJvdXRlKSA9PiB0aGlzLmFkZFJvdXRlKHJvdXRlLCBoYW5kbGVyKSk7XG4gICAgZWxzZVxuICAgICAgT2JqZWN0LmtleXMocm91dGVzKS5mb3JFYWNoKHJvdXRlID0+IHRoaXMuYWRkUm91dGUocm91dGUsIHJvdXRlc1tyb3V0ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJvdXRlKHJvdXRlLCBldm50KSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0aGlzLl9tYXRjaGluZ1JvdXRlKHJvdXRlKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2gucm91dGVyKSAgcmV0dXJuIG1hdGNoLnJvdXRlci5yb3V0ZShtYXRjaC5zdWJwYXRoLCBldm50KTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2guaGFuZGxlcikgcmV0dXJuIG1hdGNoLmhhbmRsZXIobWF0Y2gucm91dGUsIG1hdGNoLm1hdGNoZXMsIGV2bnQpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrKGV2bnQpIHtcbiAgICBsZXQgbGluayA9IGV2bnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIGlmICghbGluay5zdGFydHNXaXRoKCcjJykpIHJldHVybjsgICAgICAgLy8gT25seSBoYW5kbGUgaGFzaCBsaW5rc1xuICAgIGxpbmsgPSBsaW5rLnN1YnN0cigxKTtcbiAgICBpZiAoIXRoaXMuX21hdGNoaW5nUm91dGUobGluaykpIHJldHVybjsgIC8vIE9ubHkgaGFuZGxlIHJlZ2lzdGVyZWQgcm91dGVzXG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBsaW5rO1xuICAgIGV2bnQucHJldmVudERlZmF1bHQoKTsgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBmcm9tIGp1bXBpbmcgdG8gYW5jaG9yXG4gIH1cblxuICBfaGFuZGxlTmF2aWdhdGlvbkV2ZW50KGV2bnQpIHtcbiAgICBsZXQgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoXG4gICAgaWYgKGhhc2guc3RhcnRzV2l0aCgnIycpKSBoYXNoID0gaGFzaC5zdWJzdHIoMSk7XG4gICAgdGhpcy5yb3V0ZShoYXNoLCBldm50KTtcbiAgfVxuXG4gIF9tYXRjaGluZ1JvdXRlKHJvdXRlKSB7XG4gICAgcmV0dXJuIHJvdXRlICYmICggdGhpcy5fc3ViUm91dGVyTWF0Y2gocm91dGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RyaW5nTWF0Y2gocm91dGUpICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVnRXhwTWF0Y2gocm91dGUpICAgICAgICk7XG4gIH1cblxuICBfc3ViUm91dGVyTWF0Y2gocm91dGUpIHtcbiAgICBjb25zdCBtYXRjaCA9IHRoaXMuX3JvdXRlcy5maWx0ZXIociA9PiByWzFdIGluc3RhbmNlb2YgUm91dGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQociA9PiByb3V0ZS5zdGFydHNXaXRoKHJbMF0gKyAnLycpIHx8IHJvdXRlID09IHJbMF0pO1xuXG4gICAgcmV0dXJuIG1hdGNoICYmIHtcbiAgICAgIHJvdXRlcjogIG1hdGNoWzFdLFxuICAgICAgc3VicGF0aDogcm91dGUuc3Vic3RyKG1hdGNoWzBdLmxlbmd0aCArIDEpXG4gICAgfTtcbiAgfVxuXG4gIF9zdHJpbmdNYXRjaChyb3V0ZSkge1xuICAgIGNvbnN0IG1hdGNoID0gdGhpcy5fcm91dGVzLmZpbmQociA9PiByb3V0ZSA9PSByWzBdKTtcblxuICAgIHJldHVybiBtYXRjaCAmJiB7XG4gICAgICByb3V0ZTogICBtYXRjaFswXSxcbiAgICAgIGhhbmRsZXI6IG1hdGNoWzFdXG4gICAgfTtcbiAgfVxuXG4gIF9yZWdFeHBNYXRjaChyb3V0ZSkge1xuICAgIGNvbnN0IG1hdGNoID0gdGhpcy5fcm91dGVzLmZpbHRlcihyID0+IHJbMF0gaW5zdGFuY2VvZiBSZWdFeHApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChyID0+IHJvdXRlLm1hdGNoKHJbMF0pKTtcblxuICAgIHJldHVybiBtYXRjaCAmJiB7XG4gICAgICByb3V0ZTogICBtYXRjaFswXSxcbiAgICAgIGhhbmRsZXI6IG1hdGNoWzFdLFxuICAgICAgbWF0Y2hlczogcm91dGUubWF0Y2gobWF0Y2hbMF0pXG4gICAgfTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgQ2xpY2sgICAgICBmcm9tICcuL2NsaWNrJztcbmltcG9ydCBGaWxlVGFyZ2V0IGZyb20gJy4vZmlsZXRhcmdldCc7XG5pbXBvcnQgUm91dGVyICAgICBmcm9tICcuL3JvdXRlcic7XG5pbXBvcnQgRW5lcmdpemUgICBmcm9tICcuL2VuZXJnaXplJztcblxuY29uc3QgVGhpbWJsZWZ1bCA9IHtcbiAgQ2xpY2ssIEZpbGVUYXJnZXQsIFJvdXRlciwgRW5lcmdpemVcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRoaW1ibGVmdWw7XG53aW5kb3cuVGhpbWJsZWZ1bCA9IFRoaW1ibGVmdWw7XG4iLCIvKipcbiAqIEdpdmVuIGEgc2NvcGUgdGhpcyBjbGFzcyBhZGRzIGEgYnVuY2ggb2YgYmVoYXZpb3VyIHRvIGVsZW1lbnRzIHRoYXRcbiAqIHlvdSBkZWZpbmUgdGhyb3VnaCBkYXRhIGF0dHJpYnV0ZXMuIFRoaXMgYmVoYXZpb3VyIGlzIGJhc2VkIGFyb3VuZCBhZGRpbmdcbiAqIG9yIHJlbW92aW5nIGFuICdhY3RpdmUnIGNsYXNzIHdoZW4gZWxlbWVudHMgYXJlIGNsaWNrZWQ6XG4gKlxuICogIC0gZGF0YS1vcGVuIOKAlCBBIHNlbGVjdG9yIHRvIHB1dCB0aGUgJ2FjdGl2ZScgY2xhc3Mgb24gd2hlbiBjbGlja2VkXG4gKiAgLSBkYXRhLWNsb3NlIOKAlCBBIHNlbGVjdG9yIHRvIHJlbW92ZSB0aGUgJ2FjdGl2ZScgY2xhc3MgZnJvbSB3aGVuIGNsaWNrZWRcbiAqICAtIGRhdGEtdG9nZ2xlIOKAlCBBIHNlbGVjdG9yIHRvIHRvZ2dsZSB0aGUgJ2FjdGl2ZScgY2xhc3Mgb24gd2hlbiBjbGlja2VkXG4gKiAgLSBkYXRhLWdyb3VwIOKAlCBJZiBJIGdldCB0aGUgJ2FjdGl2ZScgY2xhc3MsIHJlbW92ZSBpdCBmcm9tIG90aGVycyBpbiBteSBncm91cFxuICogIC0gZGF0YS10aW1lciDigJQgSWYgSSBnZXQgdGhlICdhY3RpdmUnIGNsYXNzLCByZW1vdmUgaXQgYWdhaW4gYWZ0ZXIgdGhpcyBtYW55IG1pbGxpc2Vjb25kc1xuICogIC0gZGF0YS1mb2xsb3dlciDigJQgQSBzZWxlY3RvciBmb3IgYW5vdGhlciBlbGVtZW50IHRoYXQgZm9sbG93cyBteSBiZWhhdmlvdXJcbiAqXG4gKiBJZiB5b3Ugd2lzaCwgeW91IGNhbiBvdmVycmlkZSB0aGUgY2xhc3MgbmFtZSBhbmQgdGhlIG5hbWVzIG9mIGFsbCB0aGVcbiAqIGF0dHJpYnV0ZXMgYXMgb3B0aW9ucyB0byB0aGUgY29uc3RydWN0b3IuXG4gKi9cblxuaW1wb3J0IENsaWNrIGZyb20gJy4vY2xpY2snO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmVyZ2l6ZSB7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuX3Njb3BlICAgPSBzY29wZTtcbiAgICB0aGlzLl9vcHRpb25zID0gdGhpcy5fbm9ybWFsaXplT3B0aW9ucyhvcHRpb25zKTtcblxuICAgIENsaWNrLmluc3RhbmNlKCkucmVnaXN0ZXIoYCR7c2NvcGV9IFske3RoaXMuX29wdGlvbnMub3Blbn1dLCAke3Njb3BlfSBbJHt0aGlzLl9vcHRpb25zLmNsb3NlfV0sICR7c2NvcGV9IFske3RoaXMuX29wdGlvbnMudG9nZ2xlfV1gLCAoZSkgPT4gdGhpcy5faGFuZGxlQ2xpY2soZSkpO1xuICB9XG5cbiAgX25vcm1hbGl6ZU9wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgIGNsYXNzOiAgICAnYWN0aXZlJyxcbiAgICAgIG9wZW46ICAgICAnZGF0YS1vcGVuJyxcbiAgICAgIGNsb3NlOiAgICAnZGF0YS1jbG9zZScsXG4gICAgICB0b2dnbGU6ICAgJ2RhdGEtdG9nZ2xlJyxcbiAgICAgIGdyb3VwOiAgICAnZGF0YS1ncm91cCcsXG4gICAgICB0aW1lcjogICAgJ2RhdGEtdGltZXInLFxuICAgICAgZm9sbG93ZXI6ICdkYXRhLWZvbGxvd2VyJ1xuICAgIH0sIG9wdGlvbnMpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrKGV2bnQpIHtcbiAgICAvLyBXaGljaCBlbGVtZW50IGRpZCB3ZSBjbGljaz9cbiAgICBjb25zdCB0YXJnZXQgPSBldm50LnRhcmdldC5jbG9zZXN0KGBbJHt0aGlzLl9vcHRpb25zLm9wZW59XSwgWyR7dGhpcy5fb3B0aW9ucy5jbG9zZX1dLCBbJHt0aGlzLl9vcHRpb25zLnRvZ2dsZX1dYCk7XG5cbiAgICAvLyBXaGF0IGRvZXMgdGhlIGNsaWNrZWQgZWxlbWVudCB3aXNoIHRvIG9wZW4sIGNsb3NlIG9yIHRvZ2dsZT9cbiAgICBjb25zdCBjbG9zZVNlbGVjdG9yICA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5fb3B0aW9ucy5jbG9zZSk7XG4gICAgY29uc3Qgb3BlblNlbGVjdG9yICAgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuX29wdGlvbnMub3Blbik7XG4gICAgY29uc3QgdG9nZ2xlU2VsZWN0b3IgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuX29wdGlvbnMudG9nZ2xlKTtcblxuICAgIGxldCBjbG9zZUVsZW1lbnRzID0gY2xvc2VTZWxlY3RvciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9ICR7Y2xvc2VTZWxlY3Rvcn1gKSAgOiBbXTtcbiAgICBsZXQgb3BlbkVsZW1lbnRzICA9ICBvcGVuU2VsZWN0b3IgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX3Njb3BlfSAke29wZW5TZWxlY3Rvcn1gKSAgIDogW107XG5cbiAgICAvLyBBZGQgZWxlbWVudHMgdGhhdCBuZWVkIHRvIGJlIHRvZ2dsZWRcbiAgICBjbG9zZUVsZW1lbnRzID0gWy4uLmNsb3NlRWxlbWVudHMsIC4uLih0b2dnbGVTZWxlY3RvciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9ICR7dG9nZ2xlU2VsZWN0b3J9LiR7dGhpcy5fb3B0aW9ucy5jbGFzc31gKSAgICAgICA6IFtdKV07XG4gICAgb3BlbkVsZW1lbnRzICA9IFsuLi5vcGVuRWxlbWVudHMsICAuLi4odG9nZ2xlU2VsZWN0b3IgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX3Njb3BlfSAke3RvZ2dsZVNlbGVjdG9yfTpub3QoLiR7dGhpcy5fb3B0aW9ucy5jbGFzc30pYCkgOiBbXSldO1xuXG4gICAgdGhpcy5fY2xvc2UoY2xvc2VFbGVtZW50cyk7XG4gICAgdGhpcy5fb3BlbihvcGVuRWxlbWVudHMpO1xuXG4gICAgLy8gV2UncmUgZG9uZSB3aXRoIHRoaXMgZXZlbnQsIGRvbid0IHRyeSB0byBldmFsdWF0ZSBpdCBhbnkgZnVydGhlclxuICAgIGV2bnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldm50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgX2Nsb3NlKGVsZW1lbnRzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuY2xhc3MpO1xuICAgICAgdGhpcy5fY2xvc2UodGhpcy5fZm9sbG93ZXJzKGVsZW1lbnQpKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vcGVuKGVsZW1lbnRzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2UodGhpcy5fZ3JvdXAoZWxlbWVudCkpO1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuY2xhc3MpO1xuICAgICAgdGhpcy5fb3Blbih0aGlzLl9mb2xsb3dlcnMoZWxlbWVudCkpO1xuXG4gICAgICAvLyBTZXQgc2VsZi1kZXN0cnVjdCB0aW1lciBpZiBuZWVkZWRcbiAgICAgIGNvbnN0IGRlbGF5ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5fb3B0aW9ucy50aW1lcik7XG4gICAgICBpZiAoZGVsYXkpIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2Nsb3NlKFtlbGVtZW50XSksIGRlbGF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9ncm91cChlbGVtZW50KSB7XG4gICAgY29uc3QgZ3JvdXAgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLl9vcHRpb25zLmdyb3VwKTtcbiAgICBpZiAoIWdyb3VwKSByZXR1cm4gW107XG4gICAgcmV0dXJuIFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX3Njb3BlfSBbJHt0aGlzLl9vcHRpb25zLmdyb3VwfT0ke2dyb3VwfV1gKV07XG4gIH1cblxuICBfZm9sbG93ZXJzKGVsZW1lbnQpIHtcbiAgICBjb25zdCBzZWxlY3RvciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMuX29wdGlvbnMuZm9sbG93ZXIpO1xuICAgIGlmICghc2VsZWN0b3IpIHJldHVybiBbXTtcbiAgICByZXR1cm4gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fc2NvcGV9ICR7c2VsZWN0b3J9YCldO1xuICB9XG5cbn1cbiIsImltcG9ydCBUaGltYmxlZnVsIGZyb20gJ3RoaW1ibGVmdWwnO1xuY29uc3QgdHlwZXMgPSByZXF1aXJlKCcuLi9zaGFyZWQvdHlwZXMnKTtcblxuaW1wb3J0IHdlbGNvbWUgZnJvbSBcIiEhYmluYXJ5LWxvYWRlciEuL3dlbGNvbWUuY2g4XCI7XG5jb25zdCB3ZWxjb21lUHJvZ3JhbSA9IG5ldyBVaW50OEFycmF5KHdlbGNvbWUubGVuZ3RoKTtcbmZvciAobGV0IGkgPSAwOyBpIDwgd2VsY29tZS5sZW5ndGg7IGkrKylcbiAgd2VsY29tZVByb2dyYW1baV0gPSB3ZWxjb21lLmNoYXJDb2RlQXQoaSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBFbXVsYXRvciA9IHJlcXVpcmUoJy4vZW11bGF0b3InKTtcbiAgY29uc3Qga2V5Ym9hcmQgPSByZXF1aXJlKCcuL2tleWJvYXJkJyk7XG4gIGNvbnN0IGdhbWVwYWQgPSByZXF1aXJlKCcuL2dhbWVwYWQnKTtcbiAgY29uc3Qgc2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzJyk7XG4gIGNvbnN0IGRpc3BsYXkgPSByZXF1aXJlKCcuL2Rpc3BsYXknKTtcbiAgY29uc3QgeyBwbGF5U291bmQsIHN0b3BTb3VuZCB9ID0gcmVxdWlyZSgnLi9zb3VuZCcpO1xuXG4gIGNvbnN0IGluc3RhbmNlID0gbmV3IEVtdWxhdG9yKHsgZGlzcGxheSwgcGxheVNvdW5kLCBzdG9wU291bmQgfSk7XG4gIGF3YWl0IGluc3RhbmNlLmluaXQoKTtcbiAga2V5Ym9hcmQoaW5zdGFuY2UpO1xuICBnYW1lcGFkKGluc3RhbmNlKTtcbiAgY29uc3Qgc2hvd1NldHRpbmdzID0gc2V0dGluZ3MoaW5zdGFuY2UpO1xuXG4gIGluc3RhbmNlLmxvYWRQcm9ncmFtKHR5cGVzLkFVVE8sIHdlbGNvbWVQcm9ncmFtKTtcbiAgaW5zdGFuY2Uuc3RhcnQoKTtcblxuICBjb25zdCBmaWxlVGFyZ2V0ID0gVGhpbWJsZWZ1bC5GaWxlVGFyZ2V0Lmluc3RhbmNlKCk7XG4gIGZpbGVUYXJnZXQucmVnaXN0ZXIoJyNkaXNwbGF5JywgKGZpbGUsIGRhdGEpID0+IHtcbiAgICBpZiAoIGZpbGUubmFtZS5zdWJzdHIoLTQpICE9ICcuY2g4JyApXG4gICAgICByZXR1cm4gYWxlcnQoJ1lvdSBjYW4gb25seSBsb2FkICouY2g4IENISVAtOCBST01zJyk7XG4gICAgZGF0YSA9IGF0b2IoZGF0YS5zcGxpdCgnLCcpWzFdKTtcbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKGRhdGEubGVuZ3RoKSk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKyApXG4gICAgICBwcm9ncmFtW2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgIGluc3RhbmNlLnN0b3AoKTtcbiAgICBzaG93U2V0dGluZ3MocHJvZ3JhbSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsibm90aWZ5IiwibW9kdWxlIiwiZXhwb3J0cyIsImluc3RhbmNlIiwiZ2FtZXBhZHMiLCJ1bmFubm91bmNlZEdhbWVwYWRzIiwicnVubmluZyIsImtleXMiLCJwb2xsR2FtZXBhZHMiLCJjdXJyZW50R2FtZXBhZHMiLCJuYXZpZ2F0b3IiLCJnZXRHYW1lcGFkcyIsImdhbWVwYWQiLCJpbmRleCIsImtleSIsImJ1dHRvbnMiLCJwcmVzc2VkIiwicHJlc3NLZXkiLCJyZWxlYXNlS2V5Iiwic2F2ZVN0YXRlIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInB1c2giLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJPYmplY3QiLCJtYXAiLCJyZWR1Y2UiLCJhY2MiLCJ2YWx1ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwibWFwcGluZyIsImxvZyIsImlkIiwiZmlsdGVyIiwiZyIsImxlbmd0aCIsIm1lc3NhZ2UiLCJub3RpZmljYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lclRleHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsInJlbmRlciIsIndpZHRoIiwiaGVpZ2h0IiwiYnl0ZXMiLCJpbWFnZURhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJpIiwiZGlzcGxheU9mZnNldCIsInNpbGljb244T2Zmc2V0IiwiZGF0YSIsInB1dEltYWdlRGF0YSIsInNldHRpbmdzIiwicHJvZ3JhbSIsInR5cGUiLCJzcGVlZCIsImxvYWRQcm9ncmFtIiwic2V0Q3ljbGVzUGVyRnJhbWUiLCJzdGFydCIsInByZ20iLCJnbyIsIkdvIiwiV2ViQXNzZW1ibHkiLCJpbnN0YW50aWF0ZVN0cmVhbWluZyIsImFzeW5jIiwicmVzcCIsImltcG9ydE9iamVjdCIsInNvdXJjZSIsImFycmF5QnVmZmVyIiwiaW5zdGFudGlhdGUiLCJjb25zdHJ1Y3RvciIsInBsYXlTb3VuZCIsInN0b3BTb3VuZCIsImRpc3BsYXkiLCJ0aGlzIiwiX3J1bm5pbmciLCJfc3RvcFNvdW5kIiwiYXNzaWduIiwiZW52IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicGxheWluZ1BhdHRlcm4iLCJwYXR0ZXJuIiwicGl0Y2giLCJVaW50OEFycmF5IiwiX2NwdSIsIm1lbW9yeSIsImJ1ZmZlciIsImRhdGFQdHIiLCJpbml0IiwiZmV0Y2giLCJ0aGVuIiwicmVzdWx0IiwicnVuIiwiX2ludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbG9ja1RpY2siLCJjYXRjaCIsImVycm9yIiwibmV3Q3ljbGVzIiwicmVzZXQiLCJyYW0iLCJyYW1QdHIiLCJyYW1TaXplIiwiZHVtcFN0YXR1cyIsInN0b3AiLCJjeWNsZXNQZXJGcmFtZSIsImtleUNvZGUiLCJ0b1N0cmluZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwiZGF0YXNldCIsInBhc3NpdmUiLCJCbGVlcHMiLCJzZXRUb1NvdW5kIiwic2V0Vm9sdW1lIiwic2V0VG9CbGVlcCIsIl9hdWRpb0N0eCIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsImF1ZGlvQ29udGV4dCIsIl9vc2NpbGxhdG9yIiwiY3JlYXRlT3NjaWxsYXRvciIsIl9nYWluTm9kZSIsImNyZWF0ZUdhaW4iLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJnYWluIiwiZnJlcXVlbmN5Iiwic2V0UGVyaW9kaWNXYXZlIiwiX3BlcmlvZGljV2F2ZSIsIl9wYXR0ZXJuVG9CaXRzIiwiYml0cyIsIkZsb2F0MzJBcnJheSIsImJ5dGUiLCJtYXNrIiwidmFsIiwic2FtcGxlc1IiLCJzYW1wbGVzSSIsIkZGVHJlc3VsdCIsIl9GRlQiLCJjcmVhdGVQZXJpb2RpY1dhdmUiLCJzbGljZSIsImRpc2FibGVOb3JtYWxpemF0aW9uIiwiUiIsIkkiLCJuIiwiV3IiLCJjb3MiLCJQSSIsIldpIiwic2luIiwiUEVyIiwiUEVpIiwiUE9yIiwiUE9pIiwieiIsInllIiwieW8iLCJ5ZXIiLCJ5ZWkiLCJ5b3IiLCJ5b2kiLCJ5ciIsInlpIiwibSIsInAiLCJxIiwiciIsImEiLCJiIiwiYyIsImQiLCJfaW5zdGFuY2UiLCJBVVRPIiwiVklQIiwiQkxJTkRWSVAiLCJTQ0hJUCIsIlhPQ0hJUCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQ2xpY2siLCJfaGFuZGxlcnMiLCJfY2FsbEhhbmRsZXIiLCJyZWdpc3RlciIsInNlbGVjdG9yIiwiaGFuZGxlcnMiLCJjbGljayIsIm1vdXNlZG93biIsIm1vdXNldXAiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiaCIsImhhbmRsZXIiLCJkZWZhdWx0UHJldmVudGVkIiwiRmlsZVRhcmdldCIsImRyYWdDbGFzcyIsIl9kcmFnQ2xhc3MiLCJfZHJhZ092ZXIiLCJfZHJhZ0xlYXZlIiwiX2Ryb3AiLCJjYWxsYmFjayIsInMiLCJfb3BlbkZpbGVEaWFsb2ciLCJfaXNEcm9wVGFyZ2V0Iiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJkYXRhVHJhbnNmZXIiLCJkcm9wRWZmZWN0IiwiX2hhbmRsZUZpbGUiLCJmaWxlcyIsImZpbmQiLCJpbnB1dCIsImNyZWF0ZUVsZW1lbnQiLCJmaWxlIiwiX3JlYWRGaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsIlJvdXRlciIsInJvdXRlcyIsIl9yb3V0ZXMiLCJhZGRSb3V0ZXMiLCJpbnN0YWxsIiwiX2hhbmRsZUNsaWNrIiwiX2hhbmRsZU5hdmlnYXRpb25FdmVudCIsImFkZFJvdXRlIiwicm91dGUiLCJBcnJheSIsImlzQXJyYXkiLCJldm50IiwibWF0Y2giLCJfbWF0Y2hpbmdSb3V0ZSIsInJvdXRlciIsInN1YnBhdGgiLCJtYXRjaGVzIiwibGluayIsImdldEF0dHJpYnV0ZSIsInN0YXJ0c1dpdGgiLCJzdWJzdHIiLCJsb2NhdGlvbiIsImhhc2giLCJfc3ViUm91dGVyTWF0Y2giLCJfc3RyaW5nTWF0Y2giLCJfcmVnRXhwTWF0Y2giLCJSZWdFeHAiLCJUaGltYmxlZnVsIiwic2NvcGUiLCJvcHRpb25zIiwiX3Njb3BlIiwiX29wdGlvbnMiLCJfbm9ybWFsaXplT3B0aW9ucyIsIm9wZW4iLCJjbG9zZSIsInRvZ2dsZSIsImNsYXNzIiwiZ3JvdXAiLCJ0aW1lciIsImZvbGxvd2VyIiwiY2xvc2VTZWxlY3RvciIsIm9wZW5TZWxlY3RvciIsInRvZ2dsZVNlbGVjdG9yIiwiY2xvc2VFbGVtZW50cyIsIm9wZW5FbGVtZW50cyIsIl9jbG9zZSIsIl9vcGVuIiwiZWxlbWVudHMiLCJlbGVtZW50IiwiX2ZvbGxvd2VycyIsIl9ncm91cCIsImRlbGF5IiwidHlwZXMiLCJ3ZWxjb21lUHJvZ3JhbSIsIkVtdWxhdG9yIiwia2V5Ym9hcmQiLCJzaG93U2V0dGluZ3MiLCJuYW1lIiwiYWxlcnQiLCJhdG9iIiwic3BsaXQiLCJBcnJheUJ1ZmZlciIsImNoYXJDb2RlQXQiXSwic291cmNlUm9vdCI6IiJ9